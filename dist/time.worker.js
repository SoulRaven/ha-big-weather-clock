const e=new Set;let o=null,t=0;function s(){o&&(clearTimeout(o),o=null,t=0,console.log("Timer stopped."))}s(),function e(s,n){const c=performance.now();t||(t=c+n);const a=c-t;s(),t+=n;const r=Math.max(0,n-a);o=setTimeout(()=>{e(s,n)},r)}(()=>{for(const o of e)try{o.postMessage({type:"TICK",tick:performance.now()})}catch(t){console.error("Error sending tick message:",t),e.delete(o)}},1e3),self.addEventListener("connect",o=>{const t=o.ports[0];e.add(t),t.onmessage=o=>{console.log("Message received from main script",o.data),"DISCONNECT"===o.data?.type&&(e.delete(t),t.close(),s()),"WEATHER_UPDATE"===o.data?.type&&t.postMessage({type:"WEATHER_UPDATE",weather:o.data.weather})},t.onclose=()=>{console.log("worker disconnected from main script"),e.delete(t),t.close(),s()}});
//# sourceMappingURL=time.worker.js.map