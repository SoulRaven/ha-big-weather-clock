var e,t,i,s,r,a={31(e,t,i){e.exports=i.p+"basmilius.json"},59(e,t,i){e.exports=i.p+"alerts.json"},89(e,t,i){e.exports=i.p+"package.json"},238(e,t,i){i.d(t,{A:()=>s});const s=i(684).AH`:host{--sgs-pure-black:#000000;--sgs-dark-cobalt:#002D7A;--sgs-moroccan-blue:#0057E9;--sgs-ink-black:#050510;--sgs-black-forest:#0D1405;--sgs-deep-navy:#150115;--sgs-off-black:#1A1A1A;--sgs-sky-blue:#1AA7EE;--sgs-charcoal:#222222;--sgs-rangitoto:#2D3325;--sgs-dark-charcoal:#333333;--sgs-oxblood:#420000;--sgs-forest-green:#416D19;--sgs-bronze-olive:#4B3E00;--sgs-maroon:#800000;--sgs-muted-gray:#848482;--sgs-chartreuse:#87E911;--sgs-arabic-grey:#888888;--sgs-moss-green:#A3B086;--sgs-light-camel:#D8B382;--sgs-night-red:#E11845;--sgs-wattle-soft:#E5DE44;--sgs-amber-orange:#EF810E;--sgs-vivid-gold:#F2CA19;--sgs-tech-white:#F5F5F5;--sgs-peach-fuzz:#FFBE98;--sgs-pure-white:#FFFFFF;--sgs-naughty-green:#009639;--sgs-yellow-munsell:#EFCB00;--sgs-dark-tangerine:#DE7D00;--sgs-beautiful-red:#BB2724;--sgs-panels-transparency:rgba(255, 255, 255, 0.8);--sgs-font-stroke-color-day:rgba(0, 0, 0, 0.5);--sgs-font-stroke-color-night:#000000;--sgs-hours-minutes-day:#000000;--sgs-hours-minutes-night:#ffffff;--sgs-seconds-day:#ffff00;--sgs-seconds-night:#00ffff;--sgs-ampm-day:#00ffff;--sgs-ampm-night:#00ffff;--sgs-date-day:#000000;--sgs-date-night:#ffffff;--sgs-theme-color-night:#ffffff;--sgs-primary-color:#00ffff;--sgs-white:#fff;--sgs-black:#000;--sgs-hc-day-bg:#000000;--sgs-hc-day-time:#FFFFFF;--sgs-hc-day-seconds:#0057E9;--sgs-hc-day-date:#D8B382;--sgs-hc-day-ampm:#848482;--sgs-hc-day-stroke:#333333;--sgs-sf-vivid-day-bg:#000000;--sgs-sf-vivid-day-time:#F2CA19;--sgs-sf-vivid-day-seconds:#87E911;--sgs-sf-vivid-day-date:#FFFFFF;--sgs-sf-vivid-day-ampm:#F2CA19;--sgs-sf-vivid-day-stroke:#4B3E00;--sgs-solar-bright-day-bg:#FFFFFF;--sgs-solar-bright-day-time:#EF810E;--sgs-solar-bright-day-seconds:#F2CA19;--sgs-solar-bright-day-date:#EF810E;--sgs-solar-bright-day-ampm:#F2CA19;--sgs-solar-bright-day-stroke:#FFFFFF;--sgs-oceanic-day-day-bg:#0057E9;--sgs-oceanic-day-day-time:#FFFFFF;--sgs-oceanic-day-day-seconds:#F2CA19;--sgs-oceanic-day-day-date:#FFFFFF;--sgs-oceanic-day-day-ampm:#F2CA19;--sgs-oceanic-day-day-stroke:#002D7A;--sgs-nv-red-night-bg:#000000;--sgs-nv-red-night-time:#E11845;--sgs-nv-red-night-seconds:#848482;--sgs-nv-red-night-date:#EF810E;--sgs-nv-red-night-ampm:#800000;--sgs-nv-red-night-stroke:#F5F5F5;--sgs-ll-green-night-bg:#1A1A1A;--sgs-ll-green-night-time:#A3B086;--sgs-ll-green-night-seconds:#E5DE44;--sgs-ll-green-night-date:#848482;--sgs-ll-green-night-ampm:#A3B086;--sgs-ll-green-night-stroke:#2D3325;--sgs-deep-indigo-night-bg:#150115;--sgs-deep-indigo-night-time:#FFBE98;--sgs-deep-indigo-night-seconds:#1AA7EE;--sgs-deep-indigo-night-date:#848482;--sgs-deep-indigo-night-ampm:#1AA7EE;--sgs-deep-indigo-night-stroke:#050510;--sgs-forest-zen-night-bg:#222222;--sgs-forest-zen-night-time:#416D19;--sgs-forest-zen-night-seconds:#A3B086;--sgs-forest-zen-night-date:#888888;--sgs-forest-zen-night-ampm:#416D19;--sgs-forest-zen-night-stroke:#0D1405;--sgs-font-sans-serif:"Inter","Roboto Condensed","Oswald",sans-serif;--sgs-border-radius:0.5rem;inset:0;color:var(--sgs-pure-white);overflow:hidden}:host([panel]) ha-card{height:calc(100vh - var(--header-height,56px))!important;margin:0}[part=kiosk-root]{height:100%;width:100%}.big-weather-clock{display:flex;flex-direction:column;justify-content:space-between;align-items:stretch;color:var(--sgs-pure-white);height:100%;font-family:var(--sgs-font-sans-serif)!important;font-variant-numeric:tabular-nums;font-feature-settings:"tnum";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.big-weather-clock .middle{z-index:2;flex:1;display:grid;grid-template-columns:minmax(30rem,1fr) minmax(20rem,3fr) minmax(30rem,1fr);gap:clamp(.5rem,2vw,1rem);grid-template-areas:"left main-center right"}.big-weather-clock .middle.middle-noPanels{grid-template:none!important}.big-weather-clock .middle .left,.big-weather-clock .middle .right{display:flex;flex-direction:column;padding:10px;background:rgba(0,0,0,.3);backdrop-filter:blur(5px);z-index:2}.big-weather-clock .middle .left{grid-area:left}.big-weather-clock .middle .right{grid-area:right}.big-weather-clock .middle .center{display:flex;flex-direction:column;justify-content:space-between;align-items:center;grid-area:main-center;padding:10px;z-index:1}.big-weather-clock .middle .center.center-noPanels{justify-content:center!important;grid-area:unset!important}@media(min-width:390px){.big-weather-clock .middle{grid-template-columns:1fr;grid-template-areas:"main-center" "right" "left"}}@media(max-width:800px){.big-weather-clock .middle{grid-template-columns:1fr;grid-template-areas:"main-center" "right" "left"}.big-weather-clock .middle .center .time-date{line-height:1}}@media(min-width:1025px){.big-weather-clock .middle{grid-template-columns:minmax(30rem,1fr) minmax(20rem,3fr) minmax(30rem,1fr);grid-template-areas:"left main-center right"}.big-weather-clock .middle .center{align-items:center}.big-weather-clock .middle .center .time{font-size:2rem}.big-weather-clock .middle .center .time .clock-right-side{line-height:.5!important}.big-weather-clock .middle .center .date{line-height:.5}}@media(max-width:768px){.weather-clock-card{grid-template-columns:1fr;grid-template-rows:1fr auto}}#mediaContainer{position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;overflow:hidden}#mediaContainer .media-layer{position:absolute;width:100%;height:100%;object-fit:cover;will-change:visibility;transform:translate3d(0,0,0);filter:brightness(.8) contrast(1.2);backface-visibility:hidden}#mediaContainer .active{opacity:1}#mediaContainer .inactive{opacity:0}.big-weather-clock .middle .left .middle-left-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:var(--ha-space-2)}.big-weather-clock .middle .left .middle-left-container .sensor-block{display:flex;flex-direction:column;transition:transform .2s ease-in-out;padding:5px;background:rgba(0,0,0,.3);border-radius:8px}.big-weather-clock .middle .left .middle-left-container .sensor-block:hover{transform:translateX(2px)}.big-weather-clock .middle .left .middle-left-container .sensor-block.stale{opacity:.7;border-style:dashed}.big-weather-clock .middle .left .middle-left-container .sensor-block .sensor-header{display:flex;justify-content:space-between;align-items:center;border-left:3px solid var(--primary-color);padding-left:10px}.big-weather-clock .middle .left .middle-left-container .sensor-block .sensor-header .location-title{font-size:1.2rem;font-weight:500;margin:0;color:var(--primary-text-color)}.big-weather-clock .middle .left .middle-left-container .sensor-block .sensor-grid{display:grid;grid-template-columns:1fr 1fr;gap:5px}.big-weather-clock .middle .left .middle-left-container .sensor-block .sensor-grid .sensor-row{display:grid;align-items:center;gap:5px;padding:8px;background:rgba(0,0,0,.2);border-radius:8px}.big-weather-clock .middle .left .middle-left-container .sensor-block .sensor-grid .sensor-row ha-icon{--mdc-icon-size:20px;color:var(--primary-color)}.big-weather-clock .middle .left .middle-left-container .sensor-block .sensor-grid .sensor-row .sensor-time{font-size:1rem;color:var(--secondary-text-color);display:block}.big-weather-clock .middle .left .middle-left-container .sensor-block .sensor-grid .sensor-row .sensor-details{display:flex;flex-direction:row;justify-content:space-between;gap:2px;align-items:center}.big-weather-clock .middle .left .middle-left-container .sensor-block .sensor-grid .sensor-row .sensor-details ha-icon{--mdc-icon-size:32px;flex-shrink:0;flex-grow:0}.big-weather-clock .middle .left .middle-left-container .sensor-block .sensor-grid .sensor-row .sensor-details .sensor-value{font-weight:500;font-size:2rem;color:var(--primary-text-color);flex-grow:0;flex-shrink:0}.big-weather-clock .middle .left .middle-left-container .sensor-block .sensor-grid .sensor-row .sensor-details .sensor-label{font-size:1.2rem;color:var(--secondary-text-color);text-transform:capitalize;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:240px;flex-grow:1;text-align:right}.big-weather-clock .middle .left .middle-left-container .sensor-block .footer{display:flex;justify-content:space-between;align-items:center;margin-top:4px;font-size:.8rem}.big-weather-clock .middle .left .middle-left-container .sensor-block .footer .battery-info{display:flex;align-items:center;gap:4px;color:var(--secondary-text-color)}.big-weather-clock .middle .left .middle-left-container .sensor-block .footer .battery-info .sensor-details{display:flex;flex-direction:row;justify-content:space-between;gap:2px;align-items:center}.big-weather-clock .middle .left .middle-left-container .sensor-block .footer .battery-info .sensor-details ha-icon{--mdc-icon-size:32px;flex-shrink:0;flex-grow:0}.big-weather-clock .middle .left .middle-left-container .sensor-block .footer .battery-info .sensor-details .sensor-value{font-weight:500;font-size:2rem;color:var(--primary-text-color);flex-grow:0;flex-shrink:0}.big-weather-clock .middle .left .middle-left-container .sensor-block .footer .battery-info .sensor-details .sensor-label{font-size:1.2rem;color:var(--secondary-text-color);text-transform:capitalize;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:240px;flex-grow:1;text-align:right}.big-weather-clock .middle .left .middle-left-container .sensor-block .footer .battery-info ha-icon{--mdc-icon-size:24px!important}.big-weather-clock .middle .left .middle-left-container .sensor-block .footer .battery-info .sensor-value{font-size:1.2rem!important;padding-right:4px}.big-weather-clock .middle .left .middle-left-container .sensor-block .footer .battery-info .sensor-label{font-size:1.2rem!important}.big-weather-clock .middle .left .middle-left-container .sensor-block .footer .mold-badge{padding:2px 8px;border-radius:10px;background:var(--warning-color);color:var(--sgs-pure-white);font-weight:600;font-size:.9rem}.big-weather-clock .middle .left .middle-left-container .sensor-block .footer .mold-badge.mold-risk-safe{color:var(--sgs-pure-white);background:var(--sgs-naughty-green)}.big-weather-clock .middle .left .middle-left-container .sensor-block .footer .mold-badge.mold-risk-warning{color:var(--sgs-pure-black);background:var(--sgs-yellow-munsell)}.big-weather-clock .middle .left .middle-left-container .sensor-block .footer .mold-badge.mold-risk-high{color:var(--sgs-pure-white);background:var(--sgs-dark-tangerine)}.big-weather-clock .middle .left .middle-left-container .sensor-block .footer .mold-badge.mold-risk-critical{color:var(--sgs-pure-white);background:var(--sgs-beautiful-red)}.right .current-weather{display:flex;flex-direction:column;gap:.1rem;border-bottom:1px solid hsla(0,0%,100%,.2)}.right .current-weather .main-data{flex:1.2;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;border-right:1px solid var(--primary-color,#eee);gap:10px}.right .current-weather .main-data img.weather-current-icon{height:96px;transform:scale(1.2);margin-top:5px}.right .current-weather .main-data .weather-current-temperature{font-size:4vw;font-weight:600;line-height:1}.right .current-weather .main-description{display:flex;flex-direction:column;justify-content:center;align-items:center;border-bottom:1px solid var(--divider-color,#eee);margin-bottom:5px;padding-bottom:5px}.right .current-weather .main-description .weather-current-name{font-size:2rem;font-weight:600;text-transform:capitalize;text-align:center}.right .current-weather .metrics-panel{flex:2;display:grid;grid-template-columns:repeat(2,1fr);gap:5px 5px;padding-left:5px;align-self:stretch}.right .current-weather .metric-item{display:flex;align-items:center;gap:8px}.right .current-weather .metric-item .metric-icon{color:var(--primary-color);--mdc-icon-size:48px;max-width:100%;vertical-align:middle;font-style:italic;background-repeat:no-repeat;background-size:cover;shape-margin:.75rem;font-size:.75rem}.right .current-weather .metric-item .metric-data{display:flex;flex-direction:column}.right .current-weather .metric-item .metric-data .label{font-size:1rem;opacity:.6;text-transform:uppercase}.right .current-weather .metric-item .metric-data .value{font-size:1.2rem;font-weight:500}.right .current-weather .weather-current-nameBlock{text-align:end}.right .current-weather .weather-current-nameBlock .weather-current-lastUpdate{font-size:1rem;opacity:.7}.right .weather-alerts{display:flex;flex-direction:column;margin-top:5px}.right .weather-alerts .alert-item{border-radius:8px;background:rgba(0,0,0,.2);padding:10px;margin-bottom:5px}.right .weather-alerts .alert-item .weather-alert-header{display:flex;align-items:center;gap:12px}.right .weather-alerts .alert-item .weather-alert-header .icon-container{padding:8px;display:flex}.right .weather-alerts .alert-item .weather-alert-header .icon-container .weather-alerts-icons{height:48px;max-width:100%;vertical-align:middle;font-style:italic;background-repeat:no-repeat;background-size:cover;shape-margin:.75rem;font-size:.75rem}.right .weather-alerts .alert-item .weather-alert-header .icon-container .time-row{display:flex;align-items:center;gap:8px;padding:8px 0;color:var(--secondary-text-color)}.right .weather-alerts .alert-item .weather-alert-header .icon-container .time-row .time-row ha-icon{--mdc-icon-size:16px}.right .weather-alerts .alert-item .weather-alert-header .icon-container .time-row .time-text{font-size:.85rem;display:flex;align-items:center;gap:4px;flex-wrap:wrap}.right .weather-alerts .alert-item .weather-alert-header .icon-container .time-row .time-text .arrow{color:var(--disabled-text-color)}.right .weather-alerts .alert-item .weather-alert-description{font-size:.95rem;line-height:1.4;color:var(--primary-text-color);padding:10px;border-top:1px solid var(--divider-color)}.right .weather-alerts .alert-item .weather-alert-tags-row{display:flex;flex-wrap:wrap;gap:6px}.right .weather-alerts .alert-item .weather-alert-tags-row .tag-badge{background:var(--sgs-sky-blue);color:var(--primary-text-color);padding:4px 10px;border-radius:20px;font-size:.75rem;text-transform:uppercase;font-weight:700}.center .current-forecast{display:flex;flex-direction:column;justify-content:end;align-self:normal;flex:1}.center .current-forecast .weather-forecast{border-radius:10px}.center .current-forecast .weather-forecast .forecast-list{display:flex;flex-direction:column}.center .current-forecast .weather-forecast .forecast-list .forecast-item{display:grid;grid-template-columns:.5fr 48px 1fr 3fr;align-items:center;padding:5px 0;border-top:1px solid hsla(0,0%,100%,.15);color:#fff;font-size:.9rem}.center .current-forecast .weather-forecast .forecast-list .forecast-item:first-child{border-top:none}.center .current-forecast .weather-forecast .forecast-list .forecast-item .day-name{font-size:2.7rem;font-weight:400;text-transform:capitalize;min-width:40px}.center .current-forecast .weather-forecast .forecast-list .forecast-item .forecast-icon{width:48px;transform:scale(1.2);max-width:100%;vertical-align:middle;font-style:italic;background-repeat:no-repeat;background-size:cover;shape-margin:.75rem;font-size:.75rem}.center .current-forecast .weather-forecast .forecast-list .forecast-item .temp-range{font-size:2.7rem;font-weight:600;text-align:center;min-width:70px}.center .current-forecast .weather-forecast .forecast-list .forecast-item .extra-details{display:flex;flex-direction:column;align-items:flex-end;justify-content:end;gap:5px;color:#aaa;font-size:1.2rem}.center .current-forecast .weather-forecast .forecast-list .forecast-item .extra-details .details-weather ha-icon{margin-right:2px;vertical-align:middle;color:var(--primary-color)}.center .current-forecast .weather-forecast .forecast-list .forecast-item .extra-details .day-summary{font-size:1.3rem;color:#fff;text-align:right}[data-theme=high-contrast]{transition:background-color .6s ease,color .6s ease}[data-theme=high-contrast] .time-date .time .hours-minutes{color:var(--sgs-hc-day-time)!important;text-shadow:-1px -1px 0 var(--sgs-hc-day-stroke),1px -1px 0 var(--sgs-hc-day-stroke),-1px 1px 0 var(--sgs-hc-day-stroke),1px 1px 0 var(--sgs-hc-day-stroke)}[data-theme=high-contrast] .time-date .time .seconds-container{color:var(--sgs-hc-day-seconds)!important;text-shadow:-1px -1px 0 var(--sgs-hc-day-stroke),1px -1px 0 var(--sgs-hc-day-stroke),-1px 1px 0 var(--sgs-hc-day-stroke),1px 1px 0 var(--sgs-hc-day-stroke)}[data-theme=high-contrast] .time-date .time .ampm-container .basic{color:var(--sgs-hc-day-ampm)!important;text-shadow:-1px -1px 0 var(--sgs-hc-day-stroke),1px -1px 0 var(--sgs-hc-day-stroke),-1px 1px 0 var(--sgs-hc-day-stroke),1px 1px 0 var(--sgs-hc-day-stroke)}[data-theme=high-contrast] .time-date .date{color:var(--sgs-hc-day-date);text-shadow:-1px -1px 0 var(--sgs-hc-day-stroke),1px -1px 0 var(--sgs-hc-day-stroke),-1px 1px 0 var(--sgs-hc-day-stroke),1px 1px 0 var(--sgs-hc-day-stroke)}[data-theme=safety-vivid]{transition:background-color .6s ease,color .6s ease}[data-theme=safety-vivid] .time-date .time .hours-minutes{color:var(--sgs-sf-vivid-day-time)!important;text-shadow:-1px -1px 0 var(--sgs-sf-vivid-day-stroke),1px -1px 0 var(--sgs-sf-vivid-day-stroke),-1px 1px 0 var(--sgs-sf-vivid-day-stroke),1px 1px 0 var(--sgs-sf-vivid-day-stroke)}[data-theme=safety-vivid] .time-date .time .seconds-container{color:var(--sgs-sf-vivid-day-seconds)!important;text-shadow:-1px -1px 0 var(--sgs-sf-vivid-day-stroke),1px -1px 0 var(--sgs-sf-vivid-day-stroke),-1px 1px 0 var(--sgs-sf-vivid-day-stroke),1px 1px 0 var(--sgs-sf-vivid-day-stroke)}[data-theme=safety-vivid] .time-date .time .ampm-container .basic{color:var(--sgs-sf-vivid-day-ampm)!important;text-shadow:-1px -1px 0 var(--sgs-sf-vivid-day-stroke),1px -1px 0 var(--sgs-sf-vivid-day-stroke),-1px 1px 0 var(--sgs-sf-vivid-day-stroke),1px 1px 0 var(--sgs-sf-vivid-day-stroke)}[data-theme=safety-vivid] .time-date .date{color:var(--sgs-sf-vivid-day-date);text-shadow:-1px -1px 0 var(--sgs-sf-vivid-day-stroke),1px -1px 0 var(--sgs-sf-vivid-day-stroke),-1px 1px 0 var(--sgs-sf-vivid-day-stroke),1px 1px 0 var(--sgs-sf-vivid-day-stroke)}[data-theme=solar-bright]{transition:background-color .6s ease,color .6s ease}[data-theme=solar-bright] .time-date .time .hours-minutes{color:var(--sgs-solar-bright-day-time)!important;text-shadow:-1px -1px 0 var(--sgs-solar-bright-day-stroke),1px -1px 0 var(--sgs-solar-bright-day-stroke),-1px 1px 0 var(--sgs-solar-bright-day-stroke),1px 1px 0 var(--sgs-solar-bright-day-stroke)}[data-theme=solar-bright] .time-date .time .seconds-container{color:var(--sgs-solar-bright-day-seconds)!important;text-shadow:-1px -1px 0 var(--sgs-solar-bright-day-stroke),1px -1px 0 var(--sgs-solar-bright-day-stroke),-1px 1px 0 var(--sgs-solar-bright-day-stroke),1px 1px 0 var(--sgs-solar-bright-day-stroke)}[data-theme=solar-bright] .time-date .time .ampm-container .basic{color:var(--sgs-solar-bright-day-ampm)!important;text-shadow:-1px -1px 0 var(--sgs-solar-bright-day-stroke),1px -1px 0 var(--sgs-solar-bright-day-stroke),-1px 1px 0 var(--sgs-solar-bright-day-stroke),1px 1px 0 var(--sgs-solar-bright-day-stroke)}[data-theme=solar-bright] .time-date .date{color:var(--sgs-solar-bright-day-date);text-shadow:-1px -1px 0 var(--sgs-solar-bright-day-stroke),1px -1px 0 var(--sgs-solar-bright-day-stroke),-1px 1px 0 var(--sgs-solar-bright-day-stroke),1px 1px 0 var(--sgs-solar-bright-day-stroke)}[data-theme=oceanic]{transition:background-color .6s ease,color .6s ease}[data-theme=oceanic] .time-date .time .hours-minutes{color:var(--sgs-oceanic-day-day-time)!important;text-shadow:-1px -1px 0 var(--sgs-oceanic-day-day-stroke),1px -1px 0 var(--sgs-oceanic-day-day-stroke),-1px 1px 0 var(--sgs-oceanic-day-day-stroke),1px 1px 0 var(--sgs-oceanic-day-day-stroke)}[data-theme=oceanic] .time-date .time .seconds-container{color:var(--sgs-oceanic-day-day-seconds)!important;text-shadow:-1px -1px 0 var(--sgs-oceanic-day-day-stroke),1px -1px 0 var(--sgs-oceanic-day-day-stroke),-1px 1px 0 var(--sgs-oceanic-day-day-stroke),1px 1px 0 var(--sgs-oceanic-day-day-stroke)}[data-theme=oceanic] .time-date .time .ampm-container .basic{color:var(--sgs-oceanic-day-day-ampm)!important;text-shadow:-1px -1px 0 var(--sgs-oceanic-day-day-stroke),1px -1px 0 var(--sgs-oceanic-day-day-stroke),-1px 1px 0 var(--sgs-oceanic-day-day-stroke),1px 1px 0 var(--sgs-oceanic-day-day-stroke)}[data-theme=oceanic] .time-date .date{color:var(--sgs-oceanic-day-day-date);text-shadow:-1px -1px 0 var(--sgs-oceanic-day-day-stroke),1px -1px 0 var(--sgs-oceanic-day-day-stroke),-1px 1px 0 var(--sgs-oceanic-day-day-stroke),1px 1px 0 var(--sgs-oceanic-day-day-stroke)}[data-theme=night-vision-red]{transition:background-color .6s ease,color .6s ease}[data-theme=night-vision-red] .time-date .time .hours-minutes{color:var(--sgs-nv-red-night-time)!important;text-shadow:-1px -1px 0 var(--sgs-nv-red-night-stroke),1px -1px 0 var(--sgs-nv-red-night-stroke),-1px 1px 0 var(--sgs-nv-red-night-stroke),1px 1px 0 var(--sgs-nv-red-night-stroke)}[data-theme=night-vision-red] .time-date .time .seconds-container{color:var(--sgs-nv-red-night-seconds)!important;text-shadow:-1px -1px 0 var(--sgs-nv-red-night-stroke),1px -1px 0 var(--sgs-nv-red-night-stroke),-1px 1px 0 var(--sgs-nv-red-night-stroke),1px 1px 0 var(--sgs-nv-red-night-stroke)}[data-theme=night-vision-red] .time-date .time .ampm-container .basic{color:var(--sgs-nv-red-night-ampm)!important;text-shadow:-1px -1px 0 var(--sgs-nv-red-night-stroke),1px -1px 0 var(--sgs-nv-red-night-stroke),-1px 1px 0 var(--sgs-nv-red-night-stroke),1px 1px 0 var(--sgs-nv-red-night-stroke)}[data-theme=night-vision-red] .time-date .date{color:var(--sgs-nv-red-night-date);text-shadow:-1px -1px 0 var(--sgs-nv-red-night-stroke),1px -1px 0 var(--sgs-nv-red-night-stroke),-1px 1px 0 var(--sgs-nv-red-night-stroke),1px 1px 0 var(--sgs-nv-red-night-stroke)}[data-theme=low-light-green]{transition:background-color .6s ease,color .6s ease}[data-theme=low-light-green] .time-date .time .hours-minutes{color:var(--sgs-ll-green-night-time)!important;text-shadow:-1px -1px 0 var(--sgs-ll-green-night-stroke),1px -1px 0 var(--sgs-ll-green-night-stroke),-1px 1px 0 var(--sgs-ll-green-night-stroke),1px 1px 0 var(--sgs-ll-green-night-stroke)}[data-theme=low-light-green] .time-date .time .seconds-container{color:var(--sgs-ll-green-night-seconds)!important;text-shadow:-1px -1px 0 var(--sgs-ll-green-night-stroke),1px -1px 0 var(--sgs-ll-green-night-stroke),-1px 1px 0 var(--sgs-ll-green-night-stroke),1px 1px 0 var(--sgs-ll-green-night-stroke)}[data-theme=low-light-green] .time-date .time .ampm-container .basic{color:var(--sgs-ll-green-night-ampm)!important;text-shadow:-1px -1px 0 var(--sgs-ll-green-night-stroke),1px -1px 0 var(--sgs-ll-green-night-stroke),-1px 1px 0 var(--sgs-ll-green-night-stroke),1px 1px 0 var(--sgs-ll-green-night-stroke)}[data-theme=low-light-green] .time-date .date{color:var(--sgs-ll-green-night-date);text-shadow:-1px -1px 0 var(--sgs-ll-green-night-stroke),1px -1px 0 var(--sgs-ll-green-night-stroke),-1px 1px 0 var(--sgs-ll-green-night-stroke),1px 1px 0 var(--sgs-ll-green-night-stroke)}[data-theme=deep-indigo]{transition:background-color .6s ease,color .6s ease}[data-theme=deep-indigo] .time-date .time .hours-minutes{color:var(--sgs-deep-indigo-night-time)!important;text-shadow:-1px -1px 0 var(--sgs-deep-indigo-night-stroke),1px -1px 0 var(--sgs-deep-indigo-night-stroke),-1px 1px 0 var(--sgs-deep-indigo-night-stroke),1px 1px 0 var(--sgs-deep-indigo-night-stroke)}[data-theme=deep-indigo] .time-date .time .seconds-container{color:var(--sgs-deep-indigo-night-seconds)!important;text-shadow:-1px -1px 0 var(--sgs-deep-indigo-night-stroke),1px -1px 0 var(--sgs-deep-indigo-night-stroke),-1px 1px 0 var(--sgs-deep-indigo-night-stroke),1px 1px 0 var(--sgs-deep-indigo-night-stroke)}[data-theme=deep-indigo] .time-date .time .ampm-container .basic{color:var(--sgs-deep-indigo-night-ampm)!important;text-shadow:-1px -1px 0 var(--sgs-deep-indigo-night-stroke),1px -1px 0 var(--sgs-deep-indigo-night-stroke),-1px 1px 0 var(--sgs-deep-indigo-night-stroke),1px 1px 0 var(--sgs-deep-indigo-night-stroke)}[data-theme=deep-indigo] .time-date .date{color:var(--sgs-deep-indigo-night-date);text-shadow:-1px -1px 0 var(--sgs-deep-indigo-night-stroke),1px -1px 0 var(--sgs-deep-indigo-night-stroke),-1px 1px 0 var(--sgs-deep-indigo-night-stroke),1px 1px 0 var(--sgs-deep-indigo-night-stroke)}[data-theme=forest-zen]{transition:background-color .6s ease,color .6s ease}[data-theme=forest-zen] .time-date .time .hours-minutes{color:var(--sgs-forest-zen-night-time)!important;text-shadow:-1px -1px 0 var(--sgs-forest-zen-night-stroke),1px -1px 0 var(--sgs-forest-zen-night-stroke),-1px 1px 0 var(--sgs-forest-zen-night-stroke),1px 1px 0 var(--sgs-forest-zen-night-stroke)}[data-theme=forest-zen] .time-date .time .seconds-container{color:var(--sgs-forest-zen-night-seconds)!important;text-shadow:-1px -1px 0 var(--sgs-forest-zen-night-stroke),1px -1px 0 var(--sgs-forest-zen-night-stroke),-1px 1px 0 var(--sgs-forest-zen-night-stroke),1px 1px 0 var(--sgs-forest-zen-night-stroke)}[data-theme=forest-zen] .time-date .time .ampm-container .basic{color:var(--sgs-forest-zen-night-ampm)!important;text-shadow:-1px -1px 0 var(--sgs-forest-zen-night-stroke),1px -1px 0 var(--sgs-forest-zen-night-stroke),-1px 1px 0 var(--sgs-forest-zen-night-stroke),1px 1px 0 var(--sgs-forest-zen-night-stroke)}[data-theme=forest-zen] .time-date .date{color:var(--sgs-forest-zen-night-date);text-shadow:-1px -1px 0 var(--sgs-forest-zen-night-stroke),1px -1px 0 var(--sgs-forest-zen-night-stroke),-1px 1px 0 var(--sgs-forest-zen-night-stroke),1px 1px 0 var(--sgs-forest-zen-night-stroke)}.big-weather-clock .middle .center .time-date .time{display:flex;flex-direction:row;align-items:center;font-variant-numeric:tabular-nums;font-size:clamp(5rem,20vw,1rem);font-weight:600;z-index:2}.big-weather-clock .middle .center .time-date .time .clock-left-side{display:block;flex-grow:0;flex-shrink:1;flex-basis:auto;align-self:end;order:0}.big-weather-clock .middle .center .time-date .time .clock-left-side .hours-minutes{font-size:clamp(4rem,24vw,20vh);font-weight:700;text-align:center;line-height:1;color:var(--sgs-color-pure-white)}.big-weather-clock .middle .center .time-date .time .clock-right-side{display:block;flex-grow:0;flex-shrink:1;flex-basis:auto;align-self:end;order:0;height:min-content;font-size:1em}.big-weather-clock .middle .center .time-date .time .clock-right-side .seconds-container{order:0;flex:none;align-self:flex-start;line-height:1.5}.big-weather-clock .middle .center .time-date .time .clock-right-side .seconds-container .seconds{font-size:clamp(2.1rem,4vw,8vw);font-weight:800;display:inline-block;vertical-align:top}.big-weather-clock .middle .center .time-date .time .clock-right-side .ampm-container,.big-weather-clock .middle .center .time-date .time .clock-right-side .seconds-container{order:1;flex:none;align-self:flex-start}.big-weather-clock .middle .center .time-date .time .clock-right-side .ampm-container .ampm,.big-weather-clock .middle .center .time-date .time .clock-right-side .seconds-container .ampm{font-size:clamp(2.1rem,4vw,5rem);font-weight:800;display:inline-block;vertical-align:top}.big-weather-clock .middle .center .time-date .date{position:relative;font-size:clamp(2.5rem,4vw,6rem);font-weight:700;text-align:center;margin-top:.2rem;line-height:5rem;letter-spacing:.05em;text-transform:capitalize;z-index:2}`},274(e,t,i){i.d(t,{l:()=>a});var s=i(955),r=i(400);class a extends((0,r.G)()){constructor({date:e=null,timezone:t}){super(),this._date=e||new Date;const i=t||s.T.get("timezone"),r="browser"===i?Intl.DateTimeFormat().resolvedOptions().timeZone:i;this.config={timeFormat:s.T.get("timeFormat"),dateFormat:s.T.get("dateFormat"),locale:s.T.get("locale"),timezone:r},this.use12Hour=/h/.test(this.config.timeFormat),this._numFormatter=new Intl.NumberFormat(this.config.locale,{minimumIntegerDigits:2}),this._msFormatter=new Intl.NumberFormat(this.config.locale,{minimumIntegerDigits:3}),this.dtf=new Intl.DateTimeFormat(this.config.locale,{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:this.use12Hour,timeZone:this.config.timezone})}static now(e="local"){return new a({date:new Date,timezone:e})}static fromTimestamp(e,t="local"){return new a({date:new Date(e),timezone:t})}static create(e,t=0,i=1,s=0,r=0,n=0,o=0){return new a({date:new Date(e,t,i,s,r,n,o)})}get year(){return this._date.getFullYear()}get month(){return this._date.getMonth()}get monthName(){return this._date.toLocaleString(this.config.locale,{month:"long"})}get monthShort(){return this._date.toLocaleString(this.config.locale,{month:"short"})}get date(){return this._date.getDate()}get day(){return this._date.getDay()}get dayName(){return this._date.toLocaleString(this.config.locale,{weekday:"long"})}get dayShort(){return this._date.toLocaleString(this.config.locale,{weekday:"short"})}get hours(){return this._date.getHours()}get hours12(){return this.hours%12||12}get minutes(){return this._date.getMinutes()}get seconds(){return this._date.getSeconds()}get milliseconds(){return this._date.getMilliseconds()}get timestamp(){return this._date.getTime()}get timezoneOffset(){return this._date.getTimezoneOffset()}get isAM(){return this.hours<12}get isPM(){return this.hours>=12}get ampm(){return this.isAM?"AM":"PM"}get ampmLower(){return this.isAM?"am":"pm"}get utc(){if("utc"===this.config.timezone)return this;const e=new Date(this._date.getTime()+6e4*this.timezoneOffset);return new a({date:e,timezone:"utc"})}get local(){if("local"===this.config.timezone)return this;const e=new Date(this._date.getTime()-6e4*this.timezoneOffset);return new a({date:e,timezone:"local"})}toTimezone(e){return"utc"===e?this.utc:"local"===e?this.local:this}format(e){const t=this.dtf.formatToParts(this._date),i=e=>t.find(t=>t.type===e)?.value||"",s=e=>this._numFormatter.format(e),r={YYYY:this.year,YY:this.year.toString().slice(-2),MMMM:this.monthName,MMM:this.monthShort,MM:s(this.month+1),M:this.month+1,DD:s(this.date),D:this.date,dddd:this.dayName,ddd:this.dayShort,HH:i("hour"),H:this.hours,hh:i("hour"),h:this.hours12,mm:i("minute"),m:this.minutes,ss:i("second"),s:this.seconds,SSS:(e=>this._msFormatter.format(e))(this.milliseconds),A:i("dayPeriod")||this.ampm,a:(i("dayPeriod")||this.ampm).toLowerCase(),Z:`UTC${this.timezoneOffset>0?"-":"+"}${Math.abs(this.timezoneOffset/60)}`,z:this.config.timezone};return e.replace(/YYYY|YY|MMMM|MMM|MM|M|DD|D|dddd|ddd|HH|H|hh|h|mm|m|ss|s|SSS|A|a|Z|z/g,e=>void 0!==r[e]?r[e]:e)}toISOString(){return this._date.toISOString()}toLocaleString(e={}){const t={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:this.use12Hour};return this._date.toLocaleString(this.config.locale,{...t,...e})}get now(){return a.now(this.config.timezone)}get formattedTime(){return this.now.format(this.config.timeFormat)}get formattedDate(){return this.now.format(this.config.dateFormat)}get components(){const e=this.now,t=this.dtf.formatToParts(e._date),i=e=>t.find(t=>t.type===e)?.value||"",s=(this.formattedTime.match(/[:.\s-]/g)||[]).length>=2?this.formattedTime.replace(/[:.\s-]\d{2}(?=$|\s[AP]M|Z)/i,""):this.formattedTime;return{datetime:`${this.formattedDate} ${this.formattedTime}`,timeObj:{timeFormatted:this.formattedTime,timeShort:s,hours:i("hour"),minutes:i("minute"),seconds:i("second"),ampm:i("dayPeriod")||e.ampm},dateObj:{dateFormatted:this.formattedDate,year:e.year,yearShort:e.year.toString().slice(-2),month:e.month+1,day:e.date,weekday:e.dayName,weekdayShort:e.dayShort,monthName:e.monthName,monthShort:e.monthShort},timestamp:e.timestamp,iso:e.toISOString(),locale:e.toLocaleString(),timezone:e.config.timezone}}add(e,t){const i=new Date(this._date);switch(t){case"years":i.setFullYear(i.getFullYear()+e);break;case"months":i.setMonth(i.getMonth()+e);break;case"days":i.setDate(i.getDate()+e);break;case"hours":i.setHours(i.getHours()+e);break;case"minutes":i.setMinutes(i.getMinutes()+e);break;case"seconds":i.setSeconds(i.getSeconds()+e);break;case"milliseconds":i.setMilliseconds(i.getMilliseconds()+e)}return new a({date:i,timezone:this.config.timezone})}subtract(e,t){return this.add(-e,t)}isBefore(e){return this._date<e._date}isAfter(e){return this._date>e._date}isSame(e,t="millisecond"){const i=this._date,s=e._date;switch(t){case"year":return i.getFullYear()===s.getFullYear();case"month":return i.getMonth()===s.getMonth()&&i.getFullYear()===s.getFullYear();case"day":return i.toDateString()===s.toDateString();case"hour":return i.getHours()===s.getHours()&&i.toDateString()===s.toDateString();case"minute":return i.getMinutes()===s.getMinutes()&&i.getHours()===s.getHours()&&i.toDateString()===s.toDateString();default:return i.getTime()===s.getTime()}}diff(e,t="milliseconds"){const i=this._date-e._date;switch(t){case"years":return Math.floor(i/315576e5);case"months":return Math.floor(i/2630016000.0000005);case"days":return Math.floor(i/864e5);case"hours":return Math.floor(i/36e5);case"minutes":return Math.floor(i/6e4);case"seconds":return Math.floor(i/1e3);default:return i}}startAutoUpdate(e,t){if(!t)return;const i=()=>{const e=this.now;return{formatted:e.format(this.config.timeFormat),components:this.components,timestamp:e.timestamp,dateTime:e}};t&&t(i()),e.port.addEventListener("message",e=>{"TICK"===e.data.type&&t(i())})}}},333(e,t,i){i.d(t,{D:()=>s});class s{static isValidUrl(e){try{const t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(e){return!1}}static tokenize(e){return e?e.replace(/\//g,".").replace(/[^a-zA-Z0-9._]+/g,"_").replace(/^_+|_+$/g,"").replace(/[ :%]/g,"_"):""}}},359(e,t,i){i.d(t,{N:()=>g,v:()=>u});var s=i(614);const r="â‰¡ BWC",a="display:inline-block;border-width:1px 1px 0 1px;border-style:solid;border-color:#424242;color:white;background:#03a9f4;font-size:11px;padding:4px 4.5px 5px 6px;",n="color: #03a9f4; font-weight: bold;",o="color: #4caf50; font-weight: bold;",d="color: #ff9800; font-weight: bold;",l="color: #f44336; font-weight: bold;",c="color: inherit; font-weight: normal; font-style: normal;",h={header:"%câ‰¡ ha-weather-big-wall-clock".padEnd(36),ver:"%cVersion:1.0.2 Hash:e76125ea5ea27030"},m=Math.max(...Object.values(h).map(e=>e.length));for(const[e]of Object.entries(h))h[e].length<=m&&(h[e]=h[e].padEnd(m)),"header"===e&&(h[e]=`${h[e].slice(0,-1)}â‹®`);function g(){console.info(h.header+"%c\n"+h.ver,a,"",`${a} border-width:0px 1px 1px 1px;padding:7.5px;background:white;color:#424242;line-height:0.7;font-weight:600;`)}const u={log:(e,...t)=>console.log(`%c${r} %c${e}`,n,c,...t),info:(e,...t)=>console.info(`%câ“˜ %c${r} %c${e}`,o,o,c,...t),success:(e,...t)=>console.info(`%câœ” %c${r} %c${e}`,o,o,c,...t),warn:(e,...t)=>console.warn(`%câš  %c${r} %c${e}`,d,d,c,...t),error:(e,...t)=>console.error(`%câœ˜ %c${r} %c${e}`,l,l,c,...t),debug:(e,...t)=>{s.M.hasDebug()&&console.log(`%cðŸª² â‰¡ BWC [DEBUG] %c ${e} %c`,"background-color: #555;color: #fff;padding: 3px 2px 3px 3px;border-radius: 14px 0 0 14px;font-family: DejaVu Sans,Verdana,Geneva,sans-serif;text-shadow: 0 1px 0 rgba(1, 1, 1, 0.3)","background-color: #506eac;color: #fff;padding: 3px 3px 3px 2px;border-radius: 0 14px 14px 0;font-family: DejaVu Sans,Verdana,Geneva,sans-serif;text-shadow: 0 1px 0 rgba(1, 1, 1, 0.3)",c,...t)}}},396(e,t,i){i.a(e,async(e,s)=>{try{i.d(t,{M:()=>_});var r=i(684),a=i(594),n=i(955),o=i(400),d=i(274),l=i(982),c=i(972),h=i(614),m=i(359),g=i(970),u=i(238),p=i(917).R,f=e([l]),y=f.then?(await f)():f;l=y[0];h.M.hasDebug();const v=n.T.get("app.hacs_path"),w=new SharedWorker(`${v}/time.worker.js`,{type:"module",name:"Time-Sync Worker - Weather big clock"});class _ extends((0,o.G)(r.WF)){static cardName="Wall Clock Video";static cardType="big-wall-clock-video";#e="mediaContainer";static properties={hass:{type:Object},narrow:{type:Boolean},route:{type:Object},config:{type:Object},kiosk:{type:Boolean},classes:{},_locale:{state:!0},_entities:{type:Array,state:!0},day_night_entity:{type:Object},is_night:{type:Boolean},theme:{type:Object},weather_data:{type:Object},forecast:{type:Object},local_sensors:{type:Object},timeHour:{type:String},timeShort:{type:String},seconds:{type:String},showSeconds:{type:Boolean},ampm:{type:String},dateDisplay:{type:String},mediaBackground:{state:!0},debug:{type:Boolean}};static styles=r.AH`${u.A}`;constructor(...e){super(...e),this.hass=null,this.weather="",this.weatherProvider=null,this.content=!1,this.dateTimeManager=null,this.mediaManager=null,this.iconManager=null,this.showSeconds=!1,this._entities=[]}setConfig(e){if(!e)throw new Error("Invalid configuration");this.emit("config:load:pre",e),n.T.get("locale")!==this._locale&&(this._locale=n.T.get("locale",this._hass?.language?this._hass?.language:"en")),p.setLang(this._locale),this.classes={"middle-noPanels":{"middle-noPanels":n.T.get("hidePanels")},"center-noPanels":{"center-noPanels":n.T.get("hidePanels")}},this.showSeconds=n.T.get("timeFormat")?.includes("ss")||n.T.get("timeFormat")?.includes("s")||!1,this.showAMPM=(n.T.get("timeFormat")?.includes("hh")||n.T.get("timeFormat")?.includes("h"))&&n.T.get("showAMPM")||!1,this.day_night_entity=n.T.get("day_night_entity",!1),this._localSensor=n.T.get("localSensors",[]),this.dateTimeManager=new d.l(new Date),this.mediaManager=c.g.initMediaManager(),this.weatherProvider=(0,g.eo)(n.T.get("weatherConfig.weatherProvider")),this.weatherProvider&&this.weatherProvider.setHass&&this.weatherProvider.setHass(this._hass),h.M.isKioskActive()&&this._enableKioskMode(),this.emit("config:load:post",e)}set hass(e){const t=this._hass;if(this._hass=e,n.T.setHass(e),this.day_night_entity){const t=h.M.isNight(this.day_night_entity,e);t!==this.is_night&&(this.is_night=t,this.theme=this.is_night?n.T.get("theme.night"):n.T.get("theme.day"))}(!t&&e||t&&window.location.pathname.includes("big-weather-clock-panel"))&&(this.weatherProvider&&this.weatherProvider.setHass&&this.weatherProvider.setHass(e),this.mediaManager&&this.mediaManager.setHass&&this.mediaManager.setHass(e))}get hass(){return this._hass}_enableKioskMode(){setTimeout(()=>{try{const e=document.querySelector("home-assistant"),t=e?.shadowRoot?.querySelector("home-assistant-main")?.shadowRoot,i=t?.querySelector("ha-drawer");i&&(i.style.setProperty("--mdc-drawer-width","0px"),i.style.setProperty("--mdc-top-app-bar-width","100%"));const s=t?.querySelector("app-header");s&&(s.style.display="none")}catch(e){console.error("Kiosk mode failed to hide sidebar",e)}},200)}connectedCallback(){super.connectedCallback(),this.observeVisibility(this,(e,t)=>{this._handleVisibility(e,t)}),this.observePageVisibility(e=>{this._handleVisibility(e)}),n.T.on("config:initial-load",()=>{this.requestUpdate()}),w.port.start()}disconnectedCallback(){document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",()=>this.adjustLayout()),window.removeEventListener("location-changed",this._navListener),this.content=!1,this.mediaManager,super.disconnectedCallback()}_handleVisibility(e,t=null){e?(this.requestUpdate(),this.mediaManager?.resume()):this.mediaManager?.pause()}updated(e){super.updated(e),e.has("config")||e.has("is_night")}async firstUpdated(e){super.firstUpdated(e);this.observeResize(this,e=>{this.adjustLayout(),this.requestUpdate()}),this.content||(this.content=!0,this.startClockUpdates(),this._updateWeather().then(),this.iconManager=l.P.initIconManager(this._hass,this.is_night)),await this._fetchDeviceEntities().then();const t=this.renderRoot.getElementById(this.#e);t&&this.emit("FIRST_UPDATED",{container:t})}adjustLayout(){const e=this.renderRoot?.querySelector("ha-card");if(!e)return;getComputedStyle(document.documentElement).getPropertyValue("--header-height").trim();h.M.isKioskActive()&&(e.style.setProperty("height","100vh","important"),e.style.setProperty("margin","0","important"),e.style.setProperty("border-radius","0","important"))}async _fetchDeviceEntities(){if(this._hass)try{const e=await this._hass.callWS({type:"config/entity_registry/list"});this._entities=this._localSensor.map(t=>{const i=e.filter(e=>e.device_id===t.device_entity).map(e=>e.entity_id),s=t?.extra_entities||[];return{...t,resolvedEntities:[...new Set([...i,...s])]}})}catch(e){m.v.error("Failed to fetch device entities:",e)}}_processLocalSensors(){if(!this._entities||!this._hass)return null;let e={};const t={temperature:"mdi:thermometer",humidity:"mdi:water-percent",battery:"mdi:battery",light:"mdi:lightbulb",default:"mdi:eye"};return this._entities.forEach(i=>{const s=i.name;e[s]={name:s,is_stale:!1,mold_risk:null,temp:[],hum:[],battery:[],all_entities:[]};let r=null,a=null;i.resolvedEntities.forEach(i=>{const n=this._hass.states[i];if(!n)return;const o=n.attributes||{},d=o.device_class,l=h.M.getRelativeTime(n.last_updated),c=["unavailable","Unavailable","unknown"].includes(n.state),m=this._hass.formatEntityState(n),g={id:i,name:o.friendly_name||i||"N/A",label:o.friendly_name,device_class:d||"none",state:c?"N/A":m,icon:o.icon||t[d]||t.default,last_updated:l,stale:c};"temperature"===d?(e[s].temp.push(g),r=parseFloat(n.state)):"humidity"===d?(e[s].hum.push(g),a=parseFloat(n.state)):("battery"===d||o.battery_level||o.battery)&&(e[s].battery&&"battery"!==d||(g.color=h.M.getBatteryInfo(n.state),"battery"!==d&&(g.state=this._hass.formatEntityAttributeValue(n,"battery_level")||this._hass.formatEntityAttributeValue(n,"battery"),g.icon=t.battery),e[s].battery.push(g))),c&&(e[s].is_stale=!0),e[s].all_entities.push(g)});const n=e[s]?.temp[0]?.state,o=e[s]?.hum[0]?.state;n&&o&&(e[s].mold_risk=h.M._calculateMoldRisk(parseFloat(n),parseFloat(o)))}),Object.values(e)}_renderLocalSensors(){if(!this._entities)return r.qy`<div>Loading Registries...</div>`;const e=this._processLocalSensors();return r.qy`
			${e.map(e=>r.qy`
					<div class="sensor-block ${e.is_stale?"stale":""}">
						<div class="sensor-header">
							<h3 class="location-title">${e.name}</h3>
							${e.is_stale?r.qy`
								<ha-icon icon="mdi:alert-circle-outline"
								         style="color: var(--error-color)"></ha-icon>`:""}
						</div>
						<div class="sensor-grid">
							<!-- Temp -->
							${e.temp.map(e=>r.qy`
		            <div class="sensor-row" ${e.stale?"stale":""}>

			            <div class="sensor-details">
				            <ha-icon icon="${e.icon}"></ha-icon>
				            <div class="sensor-value">${e.state}</div>

			            </div>
			            <span class="sensor-time">${e.last_updated}</span>
		            </div>
							`)}
							<!-- Humidity -->
							${e.hum.map(e=>r.qy`
		            <div class="sensor-row ${e.stale?"stale":""}">

			            <div class="sensor-details">
				            <ha-icon icon="${e.icon}"></ha-icon>
				            <div class="sensor-value">${e.state}</div>

			            </div>
			            <span class="sensor-time">${e.last_updated}</span>
		            </div>
		          `)}
						</div>
						<div class="footer">
							${e.battery.map(e=>r.qy`
									<div class="battery-info ${e.stale?"stale":""}">
										<div class="sensor-details">
											<ha-icon icon="${e.icon}" style="color: ${e.color}"></ha-icon>
											<dic class="sensor-value">${e.state}</dic>
											<div class="sensor-label">${e.label}</div>
										</div>
									</div>
								`)}

							${e.mold_risk?r.qy`
		            	<div class="mold-badge ${e.mold_risk.cssClass}" >
				            ${e.mold_risk.icon?r.qy`
					            <ha-icon icon="${e.mold_risk.icon}"></ha-icon>
				            `:""}
				            ${p._("global.mold_risk")} ${e.mold_risk.level}
			            </div>
		          	`:""}
						</div>
					</div>
				`)}
    `}async _updateWeather(){const e={...n.T.get("weatherConfig"),locale:this._locale,timezone:n.T.get("timezone")};this.weatherProvider&&this.weatherProvider.fetchWeather&&await this.weatherProvider.fetchWeather(w,e),w.port.addEventListener("message",e=>{if("WEATHER_UPDATE"===e.data.type){m.v.debug("Weather update received");const t=e.data.weather;t&&t!==this.weather_data&&(this.weather_data=t,this.emit("WEATHER_CONDITION_CHANGED",{current_weather:this.weather_data.current,isNight:this.is_night}))}})}startClockUpdates(){this.dateTimeManager.startAutoUpdate(w,e=>{this.timeHour=e.components.timeObj.hours,this.timeShort=e.components.timeObj.timeShort,this.seconds=e.components.timeObj.seconds,this.ampm=e.components.timeObj.ampm,this.dateDisplay=e.components.dateObj.dateFormatted,this.is_night=h.M.isNight(this.day_night_entity,this._hass)})}_currentWeatherElement(e,t,i){const s=n.T.get("weatherConfig.showLabels");return r.qy`
      <div class="metric-item">
        <ha-icon class="metric-icon" .icon="${e}"></ha-icon>
        <div class="metric-data">
	        ${s?r.qy`<span class="label">${t}</span>`:""}
          <span class="value">${i}</span>
        </div>
      </div>
    `}_processWeatherCondition(e){if(!e||0===e.length)return"";const t=n.T.get("weatherConfig.owm_conditions");let i=[];if("basic"===t)return i=p._owmMain(e),i[0];if("detailed"===t)return i=p._owmDesc(e),i.join(", ");throw new Error(`Invalid OWM conditions: ${t}. Check documentation.`)}_renderCurrentWeather(){if(!this.weather_data?.current)return r.qy``;const e=this.weather_data.current;return r.qy`
			<div class="main-data">
				<img class="weather-current-icon" src="${this.iconManager?._getWeatherIcons(e.weather)[0]}" alt="${e.name}">
				<div class="weather-current-temperature">${e.temp.join("")}</div>
			</div>
			<div class="main-description">
				<div class="weather-current-name">${this._processWeatherCondition(e.weather)}</div>
			</div>
			<div class="metrics-panel">
				${this._currentWeatherElement("mdi:thermometer",p._("weather.feelsLike"),`${e.feels_like.join("")}`)}
				${this._currentWeatherElement("mdi:water-percent",p._("weather.humidity"),`${e.humidity.join("")}`)}

				${this._currentWeatherElement("mdi:weather-windy",p._("weather.wind"),`${e.windSpeed.join("")} ${e.windDirection}`)}

				${this._currentWeatherElement("mdi:gauge",p._("weather.pressure"),`${e.pressure.join("")}`)}
				${this._currentWeatherElement("mdi:eye",p._("weather.visibility"),`${e.visibility.join("")}`)}
				${this._currentWeatherElement("mdi:white-balance-sunny",p._("weather.uvIndex"),`${e.uvi.join("")}`)}
				${this._currentWeatherElement("mdi:weather-cloudy",p._("weather.clouds"),`${e.clouds.join("")}`)}
				${this._currentWeatherElement("mdi:water-thermometer",p._("weather.dewPoint"),`${e.dew_point.join("")}`)}
				${this._currentWeatherElement("mdi:weather-sunset-up",p._("weather.sunrise"),`${e.sunrise}`)}
				${this._currentWeatherElement("mdi:weather-sunset-down",p._("weather.sunset"),`${e.sunset}`)}
			</div>
			<div class="weather-current-nameBlock">
				<div class="weather-current-lastUpdate">${p._("weather.lastUpdate")} ${e.lastUpdate}</div>
			</div>
		`}_renderAlerts(){return this.weather_data?.alerts?this.weather_data.alerts.map(e=>{const t=this.iconManager._getWeatherAlertIcon(e.event.awareness_level,e.event.awareness_type);return r.qy`
				<div class="alert-item">
					<div class="weather-alert-header">
						<div class="icon-container">
							<img class="weather-alerts-icons" src="${t}" alt="${e.description}"/>
						</div>
						<div class="time-row">
							<div class="time-text">
								<span>${e.start}</span>
								<ha-icon icon="mdi:arrow-right-thin" class="arrow"></ha-icon>
								<span>${e.end}</span>
							</div>
						</div>
					</div>

					<div class="weather-alert-description">
						${e.description}
					</div>

					<div class="weather-alert-tags-row">
						${e.tags.map(e=>r.qy`<span class="tag-badge">${e}</span>`)}
					</div>
				</div>
			`}):r.qy``}_renderForecast(){return this.weather_data?.dailyForecast?this.weather_data.dailyForecast.map(e=>r.qy`
				<div class="forecast-item">
					<span class="day-name">${e.dayName}</span>
					<img class="forecast-icon" src="${this.iconManager?._getWeatherIcons(e.weather)[0]}" alt="${e.name}">
					<span class="temp-range">${e.temp.min[0]} / ${e.temp.max.join("")}</span>
					<div class="extra-details">
						<div class="details-weather">
							<span>
								<ha-icon icon="mdi:weather-windy-variant"></ha-icon>
								${e.wind_speed.join("")} ${e.windDirection}
							</span>
							<span>
								<ha-icon icon="mdi:water-percent"></ha-icon>
								${e.humidity.join("")}
							</span>
							${e.rain[0]>=1?r.qy`<span><ha-icon icon="mdi:weather-rainy"></ha-icon>${e.rain.join("")}</span>`:""}

							${e.snow[0]>=1?r.qy`<span><ha-icon icon="mdi:weather-snowy"></ha-icon>${e.snow.join("")}</span>`:""}
						</div>
						<div class="details-day-summary">
							<div class="day-summary">${e.summary}</div>
						</div>
					</div>
				</div>
			`):r.qy``}render(){if(!this._hass||!n.T.get())return r.qy``;const e=n.T.get("hidePanels");return r.qy`
	    <div part="kiosk-root">
			    <div class="big-weather-clock" data-theme="${this.theme}">
				    <div id="${this.#e}"></div>

				    <!-- Middle section -->
				    <div class="middle ${(0,a.H)(this.classes["middle-noPanels"])}">
					    ${e?"":r.qy`
							    <div class="left">
								    <div class="middle-left-container">
								    	${this._renderLocalSensors()}
							    	</div>
							    </div>
					    `}

					    <div class="center ${(0,a.H)(this.classes["center-noPanels"])}">
						    <div class="time-date">
							    <div class="time">
								    <div class="clock-left-side">
									    <span class="hours-minutes">${this.timeShort}</span>
									    </div>
									    <div class="clock-right-side" style="align-self:${this.showAMPM?"end":"baseline"}">
										    ${this.showSeconds?r.qy`
					        			<div class="seconds-container">
									        <span class="seconds">${this.seconds}</span>
					        			</div>`:""}
										    ${this.showAMPM?r.qy`
								        <div class="ampm-container">
									        <span class="ampm">${this.ampm}</span>
								        </div>`:""}
								    </div>
							    </div>
							    <div class="date">${this.dateDisplay}</div>
						    </div>

						    ${e?"":r.qy`
							    <div class="current-forecast">
								    <div class="right weather-forecast">
									    <!-- Weather Forecast List -->
									    <div class="forecast-list">
										    ${this._renderForecast()}
									    </div>
								    </div>
							    </div>
						    `}
					    </div>


					    ${e?"":r.qy`
						    <!-- Weather Sidebar -->
						    <div class="right">
							    	<!-- Current Weather Header -->
								    <div class="current-weather">
									    ${this._renderCurrentWeather()}
								    </div>
							    	<!-- Weather Alerts -->
							    	<div class="weather-alerts">
									    ${this._renderAlerts()}
								    </div>
						    </div>
					    `}
				    </div>
			    </div>
	    </div>
    `}}s()}catch(e){s(e)}})},400(e,t,i){i.d(t,{A:()=>n,G:()=>a});var s=i(359);const r=new EventTarget;r.instanceId=`bus_${Math.random().toString(36).substring(2,9)}`;const a=(e=Object)=>class extends e{#t=new Set;#i=null;constructor(...e){super(...e)}isUsingBus(e){return r===e}getBusDebugInfo(){return{busExists:!!r,busInstance:r,id:r.uniqueId||"No ID set"}}getBusId(){return r.instanceId}sharesBusWith(e){return"function"==typeof e.getBusId&&e.getBusId()===this.getBusId()}emit(e,t={}){super.emit&&super.emit(e,t),r.dispatchEvent(new CustomEvent(e,{detail:t}))}on(e,t){r.addEventListener(e,t)}off(e,t){r.removeEventListener(e,t)}observeDOM(e,t){const i=new MutationObserver(i=>{i.forEach(i=>{(i.addedNodes.length||i.removedNodes.length)&&(t&&(t(i),s.v.debug(`Observer DOM Callback: [${this.constructor.name}] DOM mutation detected.`)),this.emit("dom:mutation",{targetId:e.id||e.tagName,added:i.addedNodes.length}))})});return i.observe(e,{childList:!0,subtree:!0}),this.#t.add(i),i}observeVisibility(e,t,i={threshold:.1}){const r=new IntersectionObserver(i=>{for(const r of i)t&&(t(r.isIntersecting,r),s.v.debug(`Observer Callback: [${this.constructor.name}] Visibility changed to ${r.isIntersecting}`)),this.emit("dom:visibility-change",{target:e.tagName,isIntersecting:r.isIntersecting})},i);return r.observe(e),this.#t.add(r),r}observePageVisibility(e){this.#i=()=>{const t="visible"===document.visibilityState;e&&(e(t),s.v.debug(`Observer Page Visibility Callback: [${this.constructor.name}] Page visibility changed to ${t}`)),this.emit("app:tab-visibility",{isVisible:t})},document.addEventListener("visibilitychange",this.#i)}observeResize(e,t){const i=new ResizeObserver(i=>{for(let r of i)t&&(t(r.contentRect),s.v.debug(`Observer Resize Callback: [${this.constructor.name}] Resize detected.`)),this.emit("dom:resize",{target:e.tagName,rect:r.contentRect})});i.observe(e),this.#t.add(i)}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this.#t.forEach(e=>e.disconnect()),this.#t.clear(),this.#i&&document.removeEventListener("visibilitychange",this.#i),s.v.debug(`[${this.constructor.name}] Observers disconnected.`)}},n=r},475(e,t,i){i.d(t,{M:()=>n,T:()=>o});var s=i(955),r=i(359);const a=s.T.get("app.hacs_path");async function n(e={}){try{const t=Object.keys(e),i=Object.values(e),s=await Promise.all(i.map(e=>fetch(`${a}/other${e}`).then(t=>{if(!t.ok)throw new Error(`Fetch failed for ${e}`);return t.json()}))),r={};return t.forEach((e,t)=>{r[e]=s[t]}),r}catch(e){return r.v.error("Failed to load playlists:",e),{}}}async function o(e=[]){try{const[t,i,s,r,n,o]=await Promise.all(e.map(e=>fetch(`${a}/other/icons${e}`).then(e=>e.json())));return{weatherIcons:{amcharts:t,mskinThings:i,metno:s,basmilius:r,owm:n},alertIcons:{nrknoAlertIcons:o}}}catch(e){r.v.error("Failed to load icon truth tables:",e)}}},531(e,t,i){e.exports=i.p+"mskinThings.json"},594(e,t,i){i.d(t,{H:()=>n});var s=i(752);const r=1;class a{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,i){this._$Ct=e,this._$AM=t,this._$Ci=i}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}const n=(o=class extends a{constructor(e){if(super(e),e.type!==r||"class"!==e.name||e.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter(t=>e[t]).join(" ")+" "}update(e,[t]){if(void 0===this.st){this.st=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter(e=>""!==e)));for(const e in t)t[e]&&!this.nt?.has(e)&&this.st.add(e);return this.render(t)}const i=e.element.classList;for(const e of this.st)e in t||(i.remove(e),this.st.delete(e));for(const e in t){const s=!!t[e];s===this.st.has(e)||this.nt?.has(e)||(s?(i.add(e),this.st.add(e)):(i.remove(e),this.st.delete(e)))}return s.c0}},(...e)=>({_$litDirective$:o,values:e}));var o},597(e,t,i){i.a(e,async(e,t)=>{try{var s=i(89),r=i(400),a=i(614),n=i(359),o=i(396),d=e([o]);o=(d.then?(await d)():d)[0];const l=a.M.hasDebug();window.sgs=window.sgs||{},window.sgs.EventBus=r.A,window.sgs.EventBusMixin=r.G,window.customCards=window.customCards||[],window.customCards.push({type:o.M.cardType,name:o.M.cardName,description:s.description,documentationURL:s.homepage,author:s.author,version:s.version,debug:l}),customElements.define(o.M.cardType,o.M),(0,n.N)(),t()}catch(e){t(e)}})},605(e,t,i){e.exports=i.p+"metno.json"},614(e,t,i){i.d(t,{M:()=>r});var s=i(917).R;class r{static isObject(e){return e&&"object"==typeof e&&!Array.isArray(e)}static getRelativeTime(e){const t=new Date,i=new Date(e),r=Math.floor((t-i)/1e3);if(r<60)return s._("global.just_now");if(r<3600){const e=Math.floor(r/60);return`${e} ${1===e?"min":"mins"} ago`}if(r<86400){const e=Math.floor(r/3600);return`${e} ${1===e?"hr":"hrs"} ago`}return i.toLocaleDateString()}static isStale(e){return(new Date-new Date(e))/1e3>600}static _calculateMoldRisk(e,t){const i=17.27*e/(237.7+e)+Math.log(t/100),r=e-3-237.7*i/(17.27-i);let a;switch(!0){case r<=1:a={level:s._("global.critical"),cssClass:"mold-risk-critical",icon:"mdi:alert-octagon"};break;case r<=3:a={level:s._("global.high"),cssClass:"mold-risk-high",icon:"mdi:alert"};break;case t>70:a={level:s._("global.medium"),cssClass:"mold-risk-warning",icon:"mdi:alert-outline"};break;default:a={level:s._("global.safe"),cssClass:"mold-risk-safe",icon:"mdi:check-circle"}}return a}static getBatteryInfo(e){const t=parseInt(e);let i;switch(!0){case isNaN(t):i="var(--secondary-text-color)";break;case t<=15:i="var(--error-color)";break;case t<=30:i="var(--warning-color)";break;case t<=70:i="var(--primary-text-color)";break;default:i="var(--success-color, #4caf50)"}return i}static isKioskActive(){const e=new URLSearchParams(window.location.search);return e.has("kiosk")||e.has("hide_header")}static hasDebug(){return new URLSearchParams(window.location.search).has("debug")}static isNight(e,t){const i=t||document.querySelector("home-assistant").hass,s=(new Date).getHours(),r=s<6||s>=19;if(!e||!i)return r;const a=i.states[e];if(!a)return r;const n=a.state;return!!["on","true","home","open"].includes(n)||!["off","false","not_home","closed"].includes(n)&&("below_horizon"===n||"above_horizon"!==n&&r)}static defaultMerge(e,t){const i=structuredClone(e),s=(e,t)=>t&&"object"==typeof t?(Object.keys(t).forEach(i=>{const a=t[i],n=e[i];Array.isArray(n)&&Array.isArray(a)?e[i]=[...n,...a]:r.isObject(n)&&r.isObject(a)?e[i]=s(n,a):e[i]=a}),e):t;return s(i,t)}static deepMerge(e,t){const i=structuredClone(e),s=(e,t)=>r.isObject(t)?(Object.keys(t).forEach(i=>{const a=e[i],n=t[i];Array.isArray(a)&&Array.isArray(n)?e[i]=a.concat(n):r.isObject(a)&&r.isObject(n)?e[i]=s(a,n):e[i]=n}),e):t;return s(i,t)}}},684(e,t,i){i.d(t,{WF:()=>z,AH:()=>d,qy:()=>E.qy});const s=globalThis,r=s.ShadowRoot&&(void 0===s.ShadyCSS||s.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,a=Symbol(),n=new WeakMap;class o{constructor(e,t,i){if(this._$cssResult$=!0,i!==a)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(r&&void 0===e){const i=void 0!==t&&1===t.length;i&&(e=n.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&n.set(t,e))}return e}toString(){return this.cssText}}const d=(e,...t)=>{const i=1===e.length?e[0]:t.reduce((t,i,s)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[s+1],e[0]);return new o(i,e,a)},l=(e,t)=>{if(r)e.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(const i of t){const t=document.createElement("style"),r=s.litNonce;void 0!==r&&t.setAttribute("nonce",r),t.textContent=i.cssText,e.appendChild(t)}},c=r?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return(e=>new o("string"==typeof e?e:e+"",void 0,a))(t)})(e):e,{is:h,defineProperty:m,getOwnPropertyDescriptor:g,getOwnPropertyNames:u,getOwnPropertySymbols:p,getPrototypeOf:f}=Object,y=globalThis,v=y.trustedTypes,w=v?v.emptyScript:"",_=y.reactiveElementPolyfillSupport,b=(e,t)=>e,x={toAttribute(e,t){switch(t){case Boolean:e=e?w:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=null!==e;break;case Number:i=null===e?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch(e){i=null}}return i}},k=(e,t)=>!h(e,t),$={attribute:!0,type:String,converter:x,reflect:!1,useDefault:!1,hasChanged:k};Symbol.metadata??=Symbol("metadata"),y.litPropertyMetadata??=new WeakMap;class S extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=$){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const i=Symbol(),s=this.getPropertyDescriptor(e,i,t);void 0!==s&&m(this.prototype,e,s)}}static getPropertyDescriptor(e,t,i){const{get:s,set:r}=g(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get:s,set(t){const a=s?.call(this);r?.call(this,t),this.requestUpdate(e,a,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??$}static _$Ei(){if(this.hasOwnProperty(b("elementProperties")))return;const e=f(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(b("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(b("properties"))){const e=this.properties,t=[...u(e),...p(e)];for(const i of t)this.createProperty(i,e[i])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,i]of t)this.elementProperties.set(e,i)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const i=this._$Eu(e,t);void 0!==i&&this._$Eh.set(i,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const e of i)t.unshift(c(e))}else void 0!==e&&t.push(c(e));return t}static _$Eu(e,t){const i=t.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const i of t.keys())this.hasOwnProperty(i)&&(e.set(i,this[i]),delete this[i]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return l(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$ET(e,t){const i=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,i);if(void 0!==s&&!0===i.reflect){const r=(void 0!==i.converter?.toAttribute?i.converter:x).toAttribute(t,i.type);this._$Em=e,null==r?this.removeAttribute(s):this.setAttribute(s,r),this._$Em=null}}_$AK(e,t){const i=this.constructor,s=i._$Eh.get(e);if(void 0!==s&&this._$Em!==s){const e=i.getPropertyOptions(s),r="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:x;this._$Em=s;const a=r.fromAttribute(t,e.type);this[s]=a??this._$Ej?.get(s)??a,this._$Em=null}}requestUpdate(e,t,i,s=!1,r){if(void 0!==e){const a=this.constructor;if(!1===s&&(r=this[e]),i??=a.getPropertyOptions(e),!((i.hasChanged??k)(r,t)||i.useDefault&&i.reflect&&r===this._$Ej?.get(e)&&!this.hasAttribute(a._$Eu(e,i))))return;this.C(e,t,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(e,t,{useDefault:i,reflect:s,wrapped:r},a){i&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,a??t??this[e]),!0!==r||void 0!==a)||(this._$AL.has(e)||(this.hasUpdated||i||(t=void 0),this._$AL.set(e,t)),!0===s&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,i]of e){const{wrapped:e}=i,s=this[t];!0!==e||this._$AL.has(t)||void 0===s||this.C(t,void 0,i,s)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach(e=>e.hostUpdate?.()),this.update(t)):this._$EM()}catch(t){throw e=!1,this._$EM(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach(e=>e.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(e=>this._$ET(e,this[e])),this._$EM()}updated(e){}firstUpdated(e){}}S.elementStyles=[],S.shadowRootOptions={mode:"open"},S[b("elementProperties")]=new Map,S[b("finalized")]=new Map,_?.({ReactiveElement:S}),(y.reactiveElementVersions??=[]).push("2.1.2");var E=i(752);const A=globalThis;class z extends S{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=(0,E.XX)(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return E.c0}}z._$litElement$=!0,z.finalized=!0,A.litElementHydrateSupport?.({LitElement:z});const M=A.litElementPolyfillSupport;M?.({LitElement:z});(A.litElementVersions??=[]).push("4.2.2")},713(e,t,i){e.exports=i.p+"owm.json"},723(e,t,i){e.exports=i.p+"amcharts.json"},752(e,t,i){i.d(t,{XX:()=>L,c0:()=>E,qy:()=>S});const s=globalThis,r=e=>e,a=s.trustedTypes,n=a?a.createPolicy("lit-html",{createHTML:e=>e}):void 0,o="$lit$",d=`lit$${Math.random().toFixed(9).slice(2)}$`,l="?"+d,c=`<${l}>`,h=document,m=()=>h.createComment(""),g=e=>null===e||"object"!=typeof e&&"function"!=typeof e,u=Array.isArray,p=e=>u(e)||"function"==typeof e?.[Symbol.iterator],f="[ \t\n\f\r]",y=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,v=/-->/g,w=/>/g,_=RegExp(`>|${f}(?:([^\\s"'>=/]+)(${f}*=${f}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),b=/'/g,x=/"/g,k=/^(?:script|style|textarea|title)$/i,$=e=>(t,...i)=>({_$litType$:e,strings:t,values:i}),S=$(1),E=($(2),$(3),Symbol.for("lit-noChange")),A=Symbol.for("lit-nothing"),z=new WeakMap,M=h.createTreeWalker(h,129);function T(e,t){if(!u(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==n?n.createHTML(t):t}const P=(e,t)=>{const i=e.length-1,s=[];let r,a=2===t?"<svg>":3===t?"<math>":"",n=y;for(let t=0;t<i;t++){const i=e[t];let l,h,m=-1,g=0;for(;g<i.length&&(n.lastIndex=g,h=n.exec(i),null!==h);)g=n.lastIndex,n===y?"!--"===h[1]?n=v:void 0!==h[1]?n=w:void 0!==h[2]?(k.test(h[2])&&(r=RegExp("</"+h[2],"g")),n=_):void 0!==h[3]&&(n=_):n===_?">"===h[0]?(n=r??y,m=-1):void 0===h[1]?m=-2:(m=n.lastIndex-h[2].length,l=h[1],n=void 0===h[3]?_:'"'===h[3]?x:b):n===x||n===b?n=_:n===v||n===w?n=y:(n=_,r=void 0);const u=n===_&&e[t+1].startsWith("/>")?" ":"";a+=n===y?i+c:m>=0?(s.push(l),i.slice(0,m)+o+i.slice(m)+d+u):i+d+(-2===m?t:u)}return[T(e,a+(e[i]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),s]};class C{constructor({strings:e,_$litType$:t},i){let s;this.parts=[];let r=0,n=0;const c=e.length-1,h=this.parts,[g,u]=P(e,t);if(this.el=C.createElement(g,i),M.currentNode=this.el.content,2===t||3===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(s=M.nextNode())&&h.length<c;){if(1===s.nodeType){if(s.hasAttributes())for(const e of s.getAttributeNames())if(e.endsWith(o)){const t=u[n++],i=s.getAttribute(e).split(d),a=/([.?@])?(.*)/.exec(t);h.push({type:1,index:r,name:a[2],strings:i,ctor:"."===a[1]?j:"?"===a[1]?W:"@"===a[1]?N:O}),s.removeAttribute(e)}else e.startsWith(d)&&(h.push({type:6,index:r}),s.removeAttribute(e));if(k.test(s.tagName)){const e=s.textContent.split(d),t=e.length-1;if(t>0){s.textContent=a?a.emptyScript:"";for(let i=0;i<t;i++)s.append(e[i],m()),M.nextNode(),h.push({type:2,index:++r});s.append(e[t],m())}}}else if(8===s.nodeType)if(s.data===l)h.push({type:2,index:r});else{let e=-1;for(;-1!==(e=s.data.indexOf(d,e+1));)h.push({type:7,index:r}),e+=d.length-1}r++}}static createElement(e,t){const i=h.createElement("template");return i.innerHTML=e,i}}function I(e,t,i=e,s){if(t===E)return t;let r=void 0!==s?i._$Co?.[s]:i._$Cl;const a=g(t)?void 0:t._$litDirective$;return r?.constructor!==a&&(r?._$AO?.(!1),void 0===a?r=void 0:(r=new a(e),r._$AT(e,i,s)),void 0!==s?(i._$Co??=[])[s]=r:i._$Cl=r),void 0!==r&&(t=I(e,r._$AS(e,t.values),r,s)),t}class D{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:i}=this._$AD,s=(e?.creationScope??h).importNode(t,!0);M.currentNode=s;let r=M.nextNode(),a=0,n=0,o=i[0];for(;void 0!==o;){if(a===o.index){let t;2===o.type?t=new F(r,r.nextSibling,this,e):1===o.type?t=new o.ctor(r,o.name,o.strings,this,e):6===o.type&&(t=new R(r,this,e)),this._$AV.push(t),o=i[++n]}a!==o?.index&&(r=M.nextNode(),a++)}return M.currentNode=h,s}p(e){let t=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class F{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,i,s){this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=I(this,e,t),g(e)?e===A||null==e||""===e?(this._$AH!==A&&this._$AR(),this._$AH=A):e!==this._$AH&&e!==E&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):p(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==A&&g(this._$AH)?this._$AA.nextSibling.data=e:this.T(h.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:i}=e,s="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=C.createElement(T(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===s)this._$AH.p(t);else{const e=new D(s,this),i=e.u(this.options);e.p(t),this.T(i),this._$AH=e}}_$AC(e){let t=z.get(e.strings);return void 0===t&&z.set(e.strings,t=new C(e)),t}k(e){u(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,s=0;for(const r of e)s===t.length?t.push(i=new F(this.O(m()),this.O(m()),this,this.options)):i=t[s],i._$AI(r),s++;s<t.length&&(this._$AR(i&&i._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){const t=r(e).nextSibling;r(e).remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class O{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,i,s,r){this.type=1,this._$AH=A,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=A}_$AI(e,t=this,i,s){const r=this.strings;let a=!1;if(void 0===r)e=I(this,e,t,0),a=!g(e)||e!==this._$AH&&e!==E,a&&(this._$AH=e);else{const s=e;let n,o;for(e=r[0],n=0;n<r.length-1;n++)o=I(this,s[i+n],t,n),o===E&&(o=this._$AH[n]),a||=!g(o)||o!==this._$AH[n],o===A?e=A:e!==A&&(e+=(o??"")+r[n+1]),this._$AH[n]=o}a&&!s&&this.j(e)}j(e){e===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class j extends O{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===A?void 0:e}}class W extends O{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==A)}}class N extends O{constructor(e,t,i,s,r){super(e,t,i,s,r),this.type=5}_$AI(e,t=this){if((e=I(this,e,t,0)??A)===E)return;const i=this._$AH,s=e===A&&i!==A||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,r=e!==A&&(i===A||s);s&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class R{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){I(this,e)}}const H=s.litHtmlPolyfillSupport;H?.(C,F),(s.litHtmlVersions??=[]).push("3.3.2");const L=(e,t,i)=>{const s=i?.renderBefore??t;let r=s._$litPart$;if(void 0===r){const e=i?.renderBefore??null;s._$litPart$=r=new F(t.insertBefore(m(),e),e,void 0,i??{})}return r._$AI(e),r}},880(e,t,i){i.d(t,{e:()=>s});class s{static max(e){return Math.max(...e)}static min(e){return Math.min(...e)}static round(e,t=0){if(t<=0)return Math.round(e);const i=Math.pow(10,t);return Math.round(e*i)/i}static roundUp(e,t=0){return t<=0?Math.ceil(e):Math.ceil(e/t)*t}static roundDown(e,t=0){return t<=0?Math.floor(e):Math.floor(e/t)*t}static roundIfNotNull(e=null){return null===e?null:Math.round(e)}static randomIntFromInterval(e,t){e=Math.ceil(e);const i=(t=Math.floor(t))-e+1;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){const t=new Uint32Array(1);return window.crypto.getRandomValues(t),e+Math.floor(t[0]/4294967296*i)}return console.warn("window.crypto not available. Falling back to Math.random."),Math.floor(Math.random()*i)+e}}},917(e,t,i){i.d(t,{R:()=>a});var s=i(333);const r={en:{global:{safe:"Safe",medium:"Medium",high:"High",critical:"Critical",just_now:"Just now",mold_risk:"Mold risk:"},weather:{feelsLike:"Feels like",humidity:"Humidity",wind:"Wind",pressure:"Pressure",visibility:"Visibility",uvIndex:"UV Index",clouds:"Clouds",dewPoint:"Dew point",sunrise:"Sunrise",sunset:"Sunset",lastUpdate:"Last update:"},conditions:{thunderstorm_with_light_rain:"thunderstorm with light rain",thunderstorm_with_rain:"thunderstorm with rain",thunderstorm_with_heavy_rain:"thunderstorm with heavy rain",light_thunderstorm:"light thunderstorm",thunderstorm:"thunderstorm",heavy_thunderstorm:"heavy thunderstorm",ragged_thunderstorm:"ragged thunderstorm",thunderstorm_with_light_drizzle:"thunderstorm with light drizzle",thunderstorm_with_drizzle:"thunderstorm with drizzle",thunderstorm_with_heavy_drizzle:"thunderstorm with heavy drizzle",light_intensity_drizzle:"light intensity drizzle",drizzle:"drizzle",heavy_intensity_drizzle:"heavy intensity drizzle",light_intensity_drizzle_rain:"light intensity drizzle rain",drizzle_rain:"drizzle rain",heavy_intensity_drizzle_rain:"heavy intensity drizzle rain",shower_rain_and_drizzle:"shower rain and drizzle",heavy_shower_rain_and_drizzle:"heavy shower rain and drizzle",shower_drizzle:"shower drizzle",light_rain:"light rain",moderate_rain:"moderate rain",heavy_intensity_rain:"heavy intensity rain",very_heavy_rain:"very heavy rain",extreme_rain:"extreme rain",freezing_rain:"freezing rain",light_intensity_shower_rain:"light intensity shower rain",shower_rain:"shower rain",heavy_intensity_shower_rain:"heavy intensity shower rain",ragged_shower_rain:"ragged shower rain",light_snow:"light snow",snow:"snow",heavy_snow:"heavy snow",sleet:"sleet",light_shower_sleet:"light shower sleet",shower_sleet:"shower sleet",light_rain_and_snow:"light rain and snow",rain_and_snow:"rain and snow",light_shower_snow:"light shower snow",shower_snow:"shower snow",heavy_shower_snow:"heavy shower snow",mist:"mist",smoke:"smoke",haze:"haze",sand_dust_whirls:"sand/dust whirls",fog:"fog",sand:"sand",dust:"dust",volcanic_ash:"volcanic ash",squalls:"squalls",tornado:"tornado",clear_sky:"clear sky",clouds:{801:"few clouds: 11-25%",802:"scattered clouds: 25-50%",803:"broken clouds: 51-84%",804:"overcast clouds: 85-100%"}},conditionsGroups:{thunderstorm:"Thunderstorm",drizzle:"Drizzle",rain:"Rain",snow:"Snow",mist:"Mist",smoke:"Smoke",haze:"Haze",dust:"Dust",fog:"Fog",sand:"Sand",ash:"Ash",squall:"Squall",tornado:"Tornado",clear:"Clear",clouds:"Clouds"}},ro:{global:{safe:"Sigur",medium:"Mediu",high:"Mare",critical:"Critic",just_now:"acum",mold_risk:"Risc mucegai:"},weather:{feelsLike:"Temp. resim",humidity:"Umiditate",wind:"Vant",pressure:"Presiune",visibility:"Vizibilitate",uvIndex:"Index UV",clouds:"Nori",dewPoint:"Punct roua",sunrise:"Rasarit",sunset:"Apus",lastUpdate:"Ultima actualizare:"},conditions:{thunderstorm_with_light_rain:"furtunÄƒ cu ploaie uÈ™oarÄƒ",thunderstorm_with_rain:"furtunÄƒ cu ploaie",thunderstorm_with_heavy_rain:"furtunÄƒ cu ploaie torenÈ›ialÄƒ",light_thunderstorm:"furtunÄƒ uÈ™oarÄƒ",thunderstorm:"furtunÄƒ",heavy_thunderstorm:"furtunÄƒ puternicÄƒ",ragged_thunderstorm:"furtunÄƒ neregulatÄƒ",thunderstorm_with_light_drizzle:"furtunÄƒ cu burniÈ›Äƒ uÈ™oarÄƒ",thunderstorm_with_drizzle:"furtunÄƒ cu burniÈ›Äƒ",thunderstorm_with_heavy_drizzle:"furtunÄƒ cu burniÈ›Äƒ torenÈ›ialÄƒ",light_intensity_drizzle:"burniÈ›Äƒ de intensitate uÈ™oarÄƒ",drizzle:"burniÈ›Äƒ",heavy_intensity_drizzle:"burniÈ›Äƒ de intensitate puternicÄƒ",light_intensity_drizzle_rain:"ploaie cu burniÈ›Äƒ intensitate uÈ™oarÄƒ",drizzle_rain:"ploaie cu burniÈ›Äƒ",heavy_intensity_drizzle_rain:"ploaie cu burniÈ›Äƒ intensitate puternicÄƒ",shower_rain_and_drizzle:"ploaie È™i burniÈ›Äƒ",heavy_shower_rain_and_drizzle:"ploaie È™i burniÈ›Äƒ torenÈ›ialÄƒ",shower_drizzle:"burniÈ›Äƒ",light_rain:"ploaie uÈ™oarÄƒ",moderate_rain:"ploaie moderatÄƒ",heavy_intensity_rain:"ploaie de intensitate puternicÄƒ",very_heavy_rain:"ploaie foarte puternicÄƒ",extreme_rain:"ploaie extremÄƒ",freezing_rain:"ploaie Ã®ngheÈ›atÄƒ",light_intensity_shower_rain:"ploaie de intensitate uÈ™oarÄƒ",shower_rain:"ploaie",heavy_intensity_shower_rain:"ploaie de intensitate puternicÄƒ",ragged_shower_rain:"ploaie neregulatÄƒ",light_snow:"zÄƒpadÄƒ uÈ™oarÄƒ",snow:"zÄƒpadÄƒ",heavy_snow:"zÄƒpadÄƒ abundentÄƒ",sleet:"lapoviÈ›Äƒ",light_shower_sleet:"lapoviÈ›Äƒ uÈ™oarÄƒ",shower_sleet:"lapoviÈ›Äƒ",light_rain_and_snow:"ploaie uÈ™oarÄƒ È™i zÄƒpadÄƒ",rain_and_snow:"ploaie È™i zÄƒpadÄƒ",light_shower_snow:"zÄƒpadÄƒ uÈ™oarÄƒ",shower_snow:"zÄƒpadÄƒ",heavy_shower_snow:"zÄƒpadÄƒ abundentÄƒ",mist:"ceaÈ›Äƒ",smoke:"fum",haze:"ceaÈ›Äƒ uÈ™oarÄƒ",sand_dust_whirls:"vÃ¢rtejuri de nisip/praf",fog:"ceaÈ›Äƒ densÄƒ",sand:"nisip",dust:"praf",volcanic_ash:"cenuÈ™Äƒ vulcanicÄƒ",squalls:"vijelii",tornado:"tornadÄƒ",clear_sky:"cer senin",clouds:{801:"nori putini: 11-25%",802:"nori risipiÈ›i: 25-50%",803:"nori fragmentaÈ›i: 51-84%",804:"nori acoperiÈ›i: 85-100%"}},conditionsGroups:{thunderstorm:"FurtunÄƒ",drizzle:"BurniÈ›Äƒ",rain:"Ploaie",snow:"ZÄƒpadÄƒ",mist:"CeaÈ›Äƒ",smoke:"Fum",haze:"CeaÈ›Äƒ uÈ™oarÄƒ",dust:"Praf",fog:"CeaÈ›Äƒ densÄƒ",sand:"Nisip",ash:"CenuÈ™Äƒ",squall:"Vijelii",tornado:"TornadÄƒ",clear:"Senin",clouds:"Nori"}}};const a=new class{constructor(e="en"){this.lang=e}setLang(e){r[e]?this.lang=e:console.warn(`Language "${e}" not found, keeping "${this.lang}"`)}_(e,t="",i=""){const a=r[this.lang]??r.en;let n=s.D.tokenize(e).split(".").reduce((e,t)=>e?.[t],a)||e;return t&&i&&(n=n.replace(t,i)),n}_owmDesc(e){if(!e||0===e.length)return"";let t=[];return e.forEach(e=>{e?.id>=801&&e?.id<=804?t.push(this._(`conditions.clouds.${e.id}`)):t.push(this._(`conditions.${e.description}`))}),t}_owmMain(e){if(!e||0===e.length)return"";let t=[];return e.forEach(e=>{t.push(this._(`conditionsGroups.${e.main.toLowerCase()}`))}),t}}("en")},955(e,t,i){i.d(t,{T:()=>m});var s=i(400),r=i(614),a=i(359),n=i(333);const o={get app(){return{__app_name__:"ha-weather-big-wall-clock",hacs_path:"/hacsfiles/ha-weather-big-wall-clock"}},webPath:null,videoPath:null,imagePath:null,iconsPath:null,timeFormat:"HH:mm:ss",dateFormat:"DD-MM-YYYY",showAMPM:!1,timezone:"UTC",locale:"en",hidePanels:!0,day_night_entity:"sun.sun",theme:{day:"solar-bright",night:"night-vision-red"},mediaManager:{renderType:"both",conditionMode:"description",useRandom:!0,fadeDuration:1e3,minPlayTime:3e4,minRuns:5,imageDuration:3e4,onError:null,onMediaStateChanged:null,onMediaEnded:null,onPlaylistChange:null,onTransition:null,fallBackImages:["default/default_day.jpg","default/default_night.jpg"],playlist:[]},localSensors:[],weatherConfig:{entityId:"weather.forecast_home",weatherProvider:null,owm_apiKey:"your-openweathermap-api-key",owm_description:"basic",owm_conditions:"basic",displayMode:"both",latitude:"44.323216",longitude:"23.7654655",units:"metric",language:"en",weatherForecastDays:8,weatherUpdateInterval:30,showLabels:!0,icons:{iconSet:"amcharts",type:"animated"},iconsAlerts:{iconSet:"nrkno",type:"static"}},styles:""},d=(e,t)=>{const i=`${n.D.isValidUrl(e.webPath)?e.webPath:`${e.app?.hacs_path}`}${t}`;return i.endsWith("/")?i:`${i}/`},l={videoPath:e=>d(e,"/media/video"),imagePath:e=>d(e,"/media/img"),iconsPath:e=>d(e,"/media/icons")};class c extends((0,s.G)()){#s={};#r=null;#a=null;constructor(){super(),this.#n(o),this.on("config:load:pre",e=>{this.updateFromHA(e.detail)})}#n(e){this.#s=r.M.deepMerge({},e),this.#r=new Proxy(this.#s,{get:(e,t,i)=>t in l?l[t](e):Reflect.get(e,t,i)})}setHass(e){this.#a=e}#o(e,t){return e.split(".").reduce((e,t)=>e?e[t]:void 0,t)}resetToDefaults(){this.#n(o),this.emit("config:reset")}updateFromHA(e){if(!e)return;const t={...e};Array.isArray(t.localSensors)&&(this.#s.localSensors=[...t.localSensors],delete t.localSensors),this.#s=r.M.deepMerge(this.#s,t),this.#n(this.#s),this.emit("config:initial-load")}has(e){return!!e&&!1!==this.get(e,!1)}get(e,t=null){if(!e){const e=JSON.parse(JSON.stringify(this.#s));return e.videoPath=this.#r.videoPath,e.imagePath=this.#r.imagePath,e}const i=this.#o(e,this.#r);return null!=i?i:t}set(e,t){JSON.parse(JSON.stringify(this.#r));const i=e.split(".");let s=this.#r;for(let e=0;e<i.length-1;e++)i[e]in s||(s[i[e]]={}),s=s[i[e]];s[i[i.length-1]]=t,this.emit("config:changed",{path:e,value:t}),a.v.debug(`Config updated: ${e} = ${t}`)}}const h=new c;window.sgs=window.sgs||{},window.sgs.configInstance?a.v.warn("ConfigEngine instance already exists. Using the existing instance."):window.sgs.configInstance=h;const m=window.sgs.configInstance},970(e,t,i){i.d(t,{eo:()=>v});var s=i(359);class r{static instance=null;constructor(){if(r.instance)return r.instance;this.providers=new Map,r.instance=this}static getInstance(){return r.instance||(r.instance=new r),r.instance}register(e){this.providers.has(e.id)&&s.v.warn(`Weather provider with ID ${e.id} is already registered. Overwriting.`),this.providers.set(e.id,e)}getProvider(e){return this.providers.get(e)}getAllProviders(){return Array.from(this.providers.values())}hasProvider(e){return this.providers.has(e)}}const a=Object.freeze({All:"all",NotAvailable:"not-available",ClearSky:"clear sky",Sunny:"sunny",PartlyCloudy:"partlycloudy",Clouds:"clouds",Overcast:"overcast",OvercastClouds:"overcast clouds",Rain:"rain",Drizzle:"drizzle",Pouring:"pouring",LightRain:"light rain",HeavyRain:"heavy rain",ShowerRain:"shower rain",Snow:"snow",Sleet:"sleet",Hail:"hail",SnowyRainy:"snowy-rainy",Thunderstorm:"thunderstorm",Lightning:"lightning",LightningRainy:"lightning-rainy",Mist:"mist",Fog:"fog",Haze:"haze",Smoke:"smoke",Dust:"dust",Sand:"sand",Ash:"ash",Squall:"squall",Tornado:"tornado",Windy:"windy",WindyVariant:"windy-variant"}),n=(Object.freeze(Object.values(a)),{"few clouds":a.PartlyCloudy,"scattered clouds":a.PartlyCloudy,"broken clouds":a.Clouds,"overcast clouds":a.Overcast,"clear sky":a.ClearSky,"light rain":a.LightRain,"moderate rain":a.Rain,"heavy intensity rain":a.HeavyRain,"very heavy rain":a.HeavyRain,"extreme rain":a.Pouring,"freezing rain":a.SnowyRainy,"light intensity shower rain":a.ShowerRain,"shower rain":a.ShowerRain,"heavy intensity shower rain":a.ShowerRain,"ragged shower rain":a.ShowerRain,"light intensity drizzle":a.Drizzle,drizzle:a.Drizzle,"heavy intensity drizzle":a.Drizzle,"shower drizzle":a.Drizzle}),o={"01d":a.Sunny,"01n":a.ClearSky,"02d":a.PartlyCloudy,"02n":a.PartlyCloudy,"03d":a.Clouds,"03n":a.Clouds,"04d":a.Overcast,"04n":a.Overcast,"09d":a.Rain,"09n":a.Rain,"10d":a.Rain,"10n":a.Rain,"11d":a.Thunderstorm,"11n":a.Thunderstorm,"13d":a.Snow,"13n":a.Snow,"50d":a.Fog,"50n":a.Fog},d="https://cdn.jsdelivr.net/gh/basmilius/weather-icons/production/fill/all",l="https://cdn.jsdelivr.net/gh/metno/weathericons@main/weather/svg",c="https://openweathermap.org/img/wn",h="https://www.amcharts.com",m={getIconUrl(e,t,i="/local/weather-icons/"){const s=this._normalize(e);switch(t){case"basmilius":return this._getBasMiliusIcon(s);case"amcharts":return this._getAmChartsIcon(s);case"fontawesome":return this._getFontAwesomeClass(s);case"openweathermap":return this._getOpenWeatherMapIcon(s);case"local":return`${i}${s}.svg`;default:return this._getMetNoIcon(s)}},_normalize(e){if(!e)return a.NotAvailable;const t=e.toLowerCase();return o[t]?t:n[t]?n[t]:t},_getBasMiliusIcon(e){const t={[a.Sunny]:"clear-day",[a.ClearSky]:"clear-day",[a.PartlyCloudy]:"partly-cloudy-day",[a.Clouds]:"cloudy",[a.Overcast]:"overcast",[a.Rain]:"rain",[a.Drizzle]:"drizzle",[a.Pouring]:"extreme-rain",[a.Thunderstorm]:"thunderstorms",[a.LightningRainy]:"thunderstorms-rain",[a.Snow]:"snow",[a.Sleet]:"sleet",[a.Fog]:"fog",[a.Windy]:"wind"};return`${d}/${t[e]||"not-available"}.svg`},_getMetNoIcon(e){const t={[a.Sunny]:"clearsky_day",[a.ClearSky]:"clearsky_day",[a.PartlyCloudy]:"fair_day",[a.Clouds]:"cloudy",[a.Rain]:"rain",[a.Pouring]:"heavyrain",[a.LightningRainy]:"rainshowersandthunder_day",[a.Snow]:"snow",[a.Sleet]:"sleet",[a.Fog]:"fog"};return console.log(t),`${l}/${t[e]||"clearsky_day"}.svg`},_getAmChartsIcon(e){const t={[a.Sunny]:"day",[a.ClearSky]:"day",[a.PartlyCloudy]:"cloudy-day-1",[a.Clouds]:"cloudy",[a.Rain]:"rainy-6",[a.Thunderstorm]:"thunder",[a.Snow]:"snowy-6",[a.Fog]:"cloudy"};return`${h}/${t[e]||"day"}.svg`},_getFontAwesomeClass:e=>({[a.Sunny]:"fas fa-sun",[a.ClearSky]:"fas fa-sun",[a.PartlyCloudy]:"fas fa-cloud-sun",[a.Clouds]:"fas fa-cloud",[a.Rain]:"fas fa-cloud-showers-heavy",[a.Snow]:"fas fa-snowflake",[a.Thunderstorm]:"fas fa-bolt-lightning",[a.Windy]:"fas fa-wind",[a.Fog]:"fas fa-smog"}[e]||"fas fa-question"),_getOpenWeatherMapIcon:e=>`${c}/${e||"01d"}@2x.png`};var g=i(880);class u{static#d={temp:{C:{long:"Celsius",short:"Â°C"},F:{long:"Fahrenheit",short:"Â°F"},K:{long:"Kelvin",short:"K"}},wind:{ms:{long:"Meters per second",short:"m/s",rate:1},kmh:{long:"Kilometers per hour",short:"Km/h",rate:3.6},mph:{long:"Miles per hour",short:"mph",rate:2.23694},knots:{long:"Knots",short:"kn",rate:1.94384}},pressure:{hpa:{long:"Hectopascals",short:"hPa",rate:1},mb:{long:"Millibars",short:"mb",rate:1},inhg:{long:"Inches of Mercury",short:"inHg",rate:.02953},atm:{long:"Atmospheres",short:"atm",rate:9869e-7}},distance:{m:{long:"Meters",short:"m",rate:1},km:{long:"Kilometers",short:"km",rate:.001},mi:{long:"Miles",short:"mi",rate:621371e-9},nmi:{long:"Nautical Miles",short:"nmi",rate:539957e-9},ft:{long:"Feet",short:"ft",rate:3.28084}},precip:{mm:{long:"Millimeters",short:"mm",rate:1},in:{long:"Inches",short:"in",rate:.0393701},cm:{long:"Centimeters",short:"cm",rate:.1}}};static#l(e,t,i,s,r="short"){const a=this.#d[e];if(!a[i]||!a[s])throw new Error(`Invalid unit in ${e}`);const n=t/a[i].rate*a[s].rate;return[g.e.round(n,0),a[s][r]]}static convertTemp(e,t,i,s="short"){const r=this.#d.temp;let a="C"===t?e:"F"===t?5*(e-32)/9:e-273.15,n="C"===i?a:"F"===i?9*a/5+32:a+273.15;return[g.e.round(n,0),r[i][s]]}static convertWind(e,t,i,s="short"){return this.#l("wind",e,t,i,s)}static convertPressure(e,t,i,s="short"){return this.#l("pressure",e,t,i,s)}static convertDistance(e,t,i,s="short"){return this.#l("distance",e,t,i,s)}static convertPrecip(e,t,i,s="short"){return this.#l("precip",e,t,i,s)}static getWindDirection(e){return["N","NE","E","SE","S","SW","W","NW"][Math.round(e/45)%8]}}const p=new class{constructor(){this.id="openweathermap",this.name="OpenWeatherMap",this.description="Weather forecasts from OpenWeatherMap API",this.defaultUpdateInterval=900,this.units="standard"}async fetchWeather(e,t){this.defaultUpdateInterval=60*t.weatherUpdateInterval||this.defaultUpdateInterval;let i=0;this.fetchWeatherAsync(t).then(t=>{e.port.postMessage({type:"WEATHER_UPDATE",weather:t})}).catch(e=>{s.v.error("Fail to initial fetch the data for OpenWeatherMap:",e)}),e.port.addEventListener("message",r=>{"TICK"===r.data.type&&(i++,i>=this.defaultUpdateInterval&&(this.fetchWeatherAsync(t).then(t=>{e.port.postMessage({type:"WEATHER_UPDATE",weather:t})}).catch(e=>{s.v.error("Error updating weather data from OpenWeatherMap:",e)}),s.v.debug(`[OpenWeatherMap] fetch data in default interval of ${this.defaultUpdateInterval} minutes`),i=0))})}async fetchWeatherAsync(e){if(!e.owm_apiKey)throw new Error("OpenWeatherMap API key is required");const t=e.owm_apiKey,i=e.latitude||44.323216,r=e.longitude||23.7654655,a=e.language||"en",n=e.locale,o=e.timezone,d=e.iconSet||"openweathermap",l=e.iconsLocalPath,c="metric"===e.units?"km":"mi",h="metric"===e.units?"kmh":"mph",g="metric"===e.units?"hpa":"inhg",p="metric"===e.units?"C":"F",f="metric"===e.units?"mm":"in",y={year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",weekday:"short",hour12:!1,timeZone:o},v=new Intl.DateTimeFormat(n,y),w=e.weatherForecastDays>8?8:e.weatherForecastDays;try{const e=`https://api.openweathermap.org/data/3.0/onecall?lat=${i}&lon=${r}&units=${this.units}&lang=${a}&appid=${t}`;s.v.debug(`[OpenWeatherMap] ${e}`);const n=await fetch(e);if(!n.ok)throw new Error(`OpenWeatherMap API error: ${n.statusText}`);const o=await n.json();if(!o.daily||!o.daily.length)throw new Error("No forecast data available");const y=o.current,_=y.weather[0].description,b=v.formatToParts(new Date(1e3*y.dt)),x=v.formatToParts(new Date(1e3*y.sunrise)),k=v.formatToParts(new Date(1e3*y.sunset)),$={dt:y.dt,lastUpdate:b.filter(e=>["hour","minute"].includes(e.type)).map(e=>e.value).join(":"),sunrise:x.filter(e=>["hour","minute"].includes(e.type)).map(e=>e.value).join(":"),sunset:k.filter(e=>["hour","minute"].includes(e.type)).map(e=>e.value).join(":"),weather:y.weather,datetime:y.dt,temp:u.convertTemp(y.temp,"K",p),feels_like:u.convertTemp(y.feels_like,"K",p),pressure:u.convertPressure(y.pressure,"hpa",g),humidity:[y.humidity,"%"],dew_point:u.convertTemp(y.dew_point,"K",p),uvi:[y.uvi,"W/mÂ²"],clouds:[y.clouds,"%"],visibility:u.convertDistance(y.visibility,"m",c),windSpeed:u.convertWind(y.wind_speed,"ms",h),windDirection:u.getWindDirection(y.wind_deg),icon:m.getIconUrl(_,d,l)},S=o.daily.slice(0,w),E=Array.from(S).map(e=>{const t=v.formatToParts(new Date(1e3*e.dt)),i=v.formatToParts(new Date(1e3*e.sunrise)),s=v.formatToParts(new Date(1e3*e.sunset)),r=v.formatToParts(new Date(1e3*e.moonrise)),a=v.formatToParts(new Date(1e3*e.moonset));return{dt:e.dt,dayName:t.find(e=>"weekday"===e.type).value,sunrise:i.filter(e=>["hour","minute"].includes(e.type)).map(e=>e.value).join(":"),sunset:s.filter(e=>["hour","minute"].includes(e.type)).map(e=>e.value).join(":"),moonrise:r.filter(e=>["hour","minute"].includes(e.type)).map(e=>e.value).join(":"),moonset:a.filter(e=>["hour","minute"].includes(e.type)).map(e=>e.value).join(":"),moon_phase:e.moon_phase,summary:e.summary,temp:Object.fromEntries(Object.entries(e.temp).map(([e,t])=>[e,u.convertTemp(t,"K",p)])),temp_day:u.convertTemp(e.temp.day,"K",p),temp_min:u.convertTemp(e.temp.min,"K",p),temp_max:u.convertTemp(e.temp.max,"K",p),temp_night:u.convertTemp(e.temp.night,"K",p),temp_eve:u.convertTemp(e.temp.eve,"K",p),temp_morn:u.convertTemp(e.temp.morn,"K",p),feels_like_day:u.convertTemp(e.feels_like.day,"K",p),feels_like_night:u.convertTemp(e.feels_like.night,"K",p),feels_like_eve:u.convertTemp(e.feels_like.eve,"K",p),feels_like_morn:u.convertTemp(e.feels_like.morn,"K",p),pressure:u.convertPressure(e.pressure,"hpa",g),humidity:[e.humidity,"%"],dew_point:u.convertTemp(e.dew_point,"K",p),wind_speed:u.convertWind(e.wind_speed,"ms",h),windDirection:u.getWindDirection(e.wind_deg),wind_gust:u.convertWind(e.wind_gust,"ms",h),clouds:[e.clouds,"%"],uvi:[e.uvi,"W/mÂ²"],pop:[e?.pop||0,"%"],rain:u.convertPrecip(e?.rain,"mm",f),snow:u.convertPrecip(e?.snow,"mm",f),weather:e.weather,icon:m.getIconUrl(e.weather[0].description,d,l)}});return{current:$,dailyForecast:E,alerts:Array.from(o?.alerts||[]).map(e=>{const t=v.formatToParts(new Date(1e3*e.start)),i=t.filter(e=>["year","month","day"].includes(e.type)).map(e=>e.value).join("/"),s=t.filter(e=>["hour","minute"].includes(e.type)).map(e=>e.value).join(":"),r=v.formatToParts(new Date(1e3*e.end)),a=r.filter(e=>["year","month","day"].includes(e.type)).map(e=>e.value).join("/"),n=r.filter(e=>["hour","minute"].includes(e.type)).map(e=>e.value).join(":");let o={};return e.event.split(",").forEach(e=>{const[t,i]=e.trim().split("="),s=i.trim();o[t.trim()]=isNaN(s)||""===s?s:Number(s)}),{sender_name:e.sender_name,event:o,start:`${i} ${s}`,end:`${a} ${n}`,description:e.description,tags:e.tags}})}}catch(e){throw s.v.error("Error fetching weather data from OpenWeatherMap:",e),e}}getDefaultConfig(){return{apiKey:"",latitude:44.323216,longitude:23.7654655,units:"metric",language:"en"}}};const f=new class{constructor(){this.id="homeassistant",this.name="Home Assistant",this.description="Weather data from a Home Assistant entity",this.hass=void 0}setHass(e){this.hass=e}async fetchWeatherAsync(e){if(!this.hass)throw new Error("Home Assistant instance not set");const t=e.entityId;if(!t)throw new Error("Home Assistant weather entity ID is required");const i=this.hass.states[t];if(!i)throw new Error(`Entity ${t} not found`);const s=i.attributes,r=i.state,a=this.mapWeatherCondition(r),n={temperature:s.temperature,condition:this.mapConditionToKey(r),conditionUnified:a,icon:this.getIconUrl(r,e.iconSet),humidity:s.humidity,windSpeed:s.wind_speed,pressure:s.pressure,feelsLike:s.apparent_temperature};let o=[];try{const i=await this.hass.callWS({type:"call_service",domain:"weather",service:"get_forecasts",service_data:{type:"daily"},target:{entity_id:t},return_response:!0}),s=i.response[t]?.forecast;s&&Array.isArray(s)&&(o=s.map(t=>({date:new Date(t.datetime),temperatureMin:void 0!==t.templow?t.templow:t.temperature,temperatureMax:t.temperature,condition:this.mapConditionToKey(t.condition),icon:this.getIconUrl(t.condition,e.iconSet),precipitation:t.precipitation,humidity:t.humidity,windSpeed:t.wind_speed})))}catch(e){logger.error(`[HA Weather] Error fetching forecast for ${t}:`,e)}return{current:n,daily:o,entityId:t}}getDefaultConfig(){return{entityId:""}}mapConditionToKey(e){const t=e?.toLowerCase();switch(t){case"sunny":case"clear-night":return"clear_sky";case"cloudy":return"overcast_clouds";case"partlycloudy":return"scattered_clouds";case"rainy":return"rain";case"pouring":return"heavy_intensity_rain";case"lightning":case"lightning-rainy":return"thunderstorm";case"snowy":case"snowy-rainy":return"snow";case"fog":return"mist";default:return t}}mapWeatherCondition(e){const t=e?.toLowerCase();switch(t){case"clear-night":case"sunny":return Weather.ClearSky;case"cloudy":case"partlycloudy":return Weather.Clouds;case"rainy":case"pouring":case"lightning":case"lightning-rainy":return Weather.Rain;case"snowy":case"snowy-rainy":return Weather.Snow;case"fog":case"hail":return Weather.Mist;default:return Weather.All}}getIconUrl(e,t){const i=e?.toLowerCase();if("basmilius"===t)return this.getAnimatedIconUrl(i);if("openweathermap"===t)return this.getOpenWeatherMapIconUrl(i);let s="clearsky_day";switch(i){case"sunny":s="clearsky_day";break;case"clear-night":s="clearsky_night";break;case"cloudy":s="cloudy";break;case"partlycloudy":s="fair_day";break;case"rainy":s="rain";break;case"pouring":s="heavyrain";break;case"lightning":case"lightning-rainy":s="rainshowersandthunder_day";break;case"snowy":s="snow";break;case"snowy-rainy":s="sleet";break;case"fog":s="fog"}return`https://cdn.jsdelivr.net/gh/metno/weathericons@main/weather/svg/${s}.svg`}getOpenWeatherMapIconUrl(e){let t="01d";switch(e){case"sunny":t="01d";break;case"clear-night":t="01n";break;case"cloudy":t="03d";break;case"partlycloudy":t="02d";break;case"rainy":t="10d";break;case"pouring":t="09d";break;case"lightning":case"lightning-rainy":t="11d";break;case"snowy":case"snowy-rainy":t="13d";break;case"fog":t="50d"}return"https://openweathermap.org/img/wn/{iconCode}@2x.png"}getAnimatedIconUrl(e){let t="clear-day";switch(e){case"sunny":t="clear-day";break;case"clear-night":t="clear-night";break;case"cloudy":t="cloudy";break;case"partlycloudy":t="partly-cloudy-day";break;case"rainy":t="rain";break;case"pouring":t="extreme-rain";break;case"lightning":case"lightning-rainy":t="thunderstorms-rain";break;case"snowy":t="snow";break;case"snowy-rainy":t="sleet";break;case"fog":t="fog";break;case"hail":t="hail";break;case"windy":t="wind"}return`https://cdn.jsdelivr.net/gh/basmilius/weather-icons/production/fill/all/${t}.svg`}},y=r.getInstance();function v(e){return y.getProvider(e)}y.register(p),y.register(f)},972(e,t,i){i.d(t,{g:()=>u});var s=i(955),r=i(400),a=i(614),n=i(880);class o{static imageExists(e,t=()=>{}){const i=new Image;return i.src=e,!!i.complete&&(t(!0),!0)}static async isVideoValid(e){try{const t=await fetch(e,{method:"HEAD"}),i=t.headers.get("Content-Type");return t.ok&&i.includes("video")}catch(e){return!1}}}var d=i(475),l=i(359),c=i(333);const h=i.p+"iPlaylist.json",m=i.p+"vPlaylist.json";class g{constructor(e){this.manager=e,this.countImageFail=0}attachVideoListeners(e){const t=e.dataset.index;e.addEventListener("playing",()=>{e===this.manager.activeElement&&(clearTimeout(e._stallTimer),this.manager._setState({isPlaying:!0,isBuffering:!1,isPaused:!1}))}),e.addEventListener("pause",()=>{e===this.manager.activeElement&&this.manager._setState({isPlaying:!1,isPaused:!0})}),e.addEventListener("waiting",()=>{e===this.manager.activeElement&&(clearTimeout(e._stallTimer),e._stallTimer=setTimeout(()=>{e.paused&&!this.manager.mediaState.isPaused&&e.play().catch(()=>{})},300),this.manager._setState({isBuffering:!0}),clearTimeout(e._stallTimer),e._stallTimer=setTimeout(()=>{e===this.manager.activeElement&&e.paused&&!this.manager.mediaState.isPaused&&(l.v.debug(`Video [${e.dataset.index}] stalled â€” attempting resume.`),e.play().catch(()=>this.manager._handleMediaError(e,new Error("stall resume failed"))))},500))}),e.addEventListener("canplay",()=>{e===this.manager.activeElement&&(clearTimeout(e._stallTimer),this.manager._setState({isBuffering:!1,isLoading:!1}))}),e.addEventListener("timeupdate",()=>{e===this.manager.activeElement&&this.manager._setState({currentTime:e.currentTime,remainingTime:e.duration-e.currentTime})}),e.addEventListener("ended",()=>{this.manager.handleMediaEnd(e)}),e.addEventListener("error",i=>{l.v.error(`Video [${t}] error:`,i),this.manager._handleMediaError(e,i)})}attachImageListeners(e){e.addEventListener("load",()=>{this.countImageFail=0,this.manager._setState({isLoading:!1,hasError:!1})}),e.addEventListener("error",t=>{this.countImageFail++,l.v.error(`Image load error [${this.countImageFail}]: ${e.src}`),this.countImageFail<=3?this.manager._handleMediaError(e,t):(l.v.warn("Too many consecutive image failures â€” stopping auto-recover."),this.manager._setState({hasError:!0,errorMessage:`Image failed: ${e.src}`}))})}}class u extends((0,r.G)()){constructor(){super(),this.events=new g(this);const e={webPath:s.T.get("webPath"),videoPath:s.T.get("videoPath"),imagePath:s.T.get("imagePath")};this.config={...s.T.get("mediaManager"),...e},["description","main"].includes(this.config.conditionMode)||(l.v.warn('"conditionMode" must be "description" or "main". Defaulting to "description".'),this.config.conditionMode="description"),this._hass=null,this.fullPlaylist={},this.currentCondition=null,this.dayNightMode="day",this.currentPlaylist=[],this.currentIndex=0,this.videoElements=[],this.imageElements=[],this.activeElement=null,this.nextElement=null,this.startTime=null,this.runCount=0,this.canTransition=!1,this.transitionTimer=null,this.minRuns=1,this.imageRemainingTime=0,this.lastStartTime=null,this.currentImageDuration=0,this.mediaState={isLoading:!1,isPlaying:!1,isPaused:!1,isBuffering:!1,hasError:!1,errorMessage:null,volume:0,readyState:0,networkState:0,bufferedRanges:[],remainingTime:0,loadProgress:0,currentTime:0,duration:0},this.ready=this._setup(),this._initListeners()}static initMediaManager(){return new u}async _setup(){try{const e=await(0,d.M)({vData:m,iData:h}),t=a.M.deepMerge(e.vData,e.iData),i=this._parsePlaylist(t),s=this.config.playlist?this._parsePlaylist(this.config.playlist):{};this.fullPlaylist=a.M.deepMerge(i,s),l.v.debug("MediaManager ready â€” playlist data loaded.")}catch(e){l.v.error("Failed to initialise MediaManager",e),this.fullPlaylist={}}}_initListeners(){this.on("FIRST_UPDATED",async({detail:{container:e}})=>{await this.ready,await this._init(e)}),this.on("WEATHER_CONDITION_CHANGED",async({detail:{current_weather:e,isNight:t}})=>{await this.ready,this._applyCondition(e,t)})}async _init(e){this._createMediaElements(e),this._loadPlaylist(),this._playNext()}setHass(e){this._hass!==e&&(this._hass=e)}_applyCondition(e,t=!1){const i=e.weather[0].description,s=t?"night":"day",r=c.D.tokenize(i);this.currentCondition===r&&this.dayNightMode===s||(this.currentCondition=r,this.dayNightMode=s,this._loadPlaylist(),"function"==typeof this.config.onPlaylistChange&&this.config.onPlaylistChange(r,s,this.currentPlaylist.length),this.videoElements.length&&this._forceNext())}_createMediaElements(e){const t=document.createDocumentFragment(),i=`opacity ${this.config.fadeDuration}ms ease-in-out`;for(let e=0;e<2;e++){const s=document.createElement("video");s.className="media-layer video-layer",s.dataset.index=e,s.dataset.type="video",s.autoplay=!1,s.setAttribute("muted",""),s.muted=!0,s.playsInline=!0,s.setAttribute("playsinline",""),s.preload="auto",s.style.transition=i,this.events.attachVideoListeners(s),this.videoElements.push(s),t.appendChild(s);const r=document.createElement("img");r.className="media-layer image-layer",r.dataset.index=e,r.dataset.type="image",r.style.transition=i,this.events.attachImageListeners(r),this.imageElements.push(r),t.appendChild(r)}[...this.videoElements,...this.imageElements].forEach(e=>e.classList.add("inactive")),e.appendChild(t),l.v.debug("Media elements created (2 video, 2 image).")}_loadPlaylist(){let e=[];if(this.currentCondition){const t=this.fullPlaylist[this.currentCondition];if(t){const i="night"===this.dayNightMode?"day":"night";e=t[this.dayNightMode]??[],e.length||(e=t[i]??[])}e.length||l.v.warn(`No playlist found for condition "${this.currentCondition}" â€” using emergency fallback.`)}else l.v.debug("Condition not yet known â€” using emergency fallback until weather loads.");if(e.length||(e=this._emergencyFallback()),this.currentPlaylist=e,e.length>1){let t;do{t=n.e.randomIntFromInterval(0,e.length-1)}while(t===this.currentIndex);this.currentIndex=t}else this.currentIndex=0;l.v.debug(`Playlist loaded: ${e.length} items, condition="${this.currentCondition}", mode="${this.dayNightMode}", start index ${this.currentIndex}.`)}_emergencyFallback(){const e=s.T.get("mediaManager.fallBackImages")||[];if(e.length){const t=e[n.e.randomIntFromInterval(0,e.length-1)],i=`${this.config.imagePath}${t}`;if(o.imageExists(i))return[{type:"images",url:i}]}return[{type:"images",url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyMCIgaGVpZ2h0PSIxMDgwIiB2aWV3Qm94PSIwIDAgMTkyMCAxMDgwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB3aWR0aD0iMTkyMCIgaGVpZ2h0PSIxMDgwIiBmaWxsPSJ1cmwoI2dhcmRpZW50XzEwODBwKSIvPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJnYXJkaWVudF8xMDgwcCIgeDE9IjAiIHkxPSIwIiB4Mj0iMTkyMCIgeTI9IjEwODAiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzFhMWYyNSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMzNDRhNWUiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4="}]}_parsePlaylist(e){if(!e)return{};const t={};for(const[i,s]of Object.entries(e))t[i]={day:this._parseMediaList(s.day||[],i),night:this._parseMediaList(s.night||[],i)};return t}_parseMediaList(e,t){if(!Array.isArray(e))return[];const i=String(this.config.renderType||"both").trim().toLowerCase();if("none"===i)return[];const s=String(t).trim().toLowerCase();return e.reduce((e,t)=>{const r="string"==typeof t,a=r?/\.(mp4|webm|mov|avi|mkv)$/i.test(t)?"video":"images":t?.type||"video";if("both"!==i&&a!==i)return e;if(r){const i="video"===a?this.config.videoPath:this.config.imagePath;e.push({type:a,url:`${i}${s}/${t}`})}else t&&"object"==typeof t&&e.push({type:a,url:t.url,minTime:t.minTime||t.min_time,minRuns:t.minRuns||t.min_runs,duration:t.duration});return e},[])}_playNext(){if(this.currentPlaylist.length||this._loadPlaylist(),!this.currentPlaylist.length)return void l.v.error("Playlist is still empty after reload â€” DOM or data not ready yet.");this.activeElement||(this.activeElement=this.videoElements[0]??this.imageElements[0]);const e=this.currentPlaylist[this.currentIndex];e?(l.v.debug(`Playing [${this.currentIndex+1}/${this.currentPlaylist.length}] ${e.type}: ${e.url}`),this.startTime=Date.now(),this.runCount=0,this.canTransition=!1,this._setState({isLoading:!0,isPlaying:!1,isPaused:!1,isBuffering:!1,hasError:!1,errorMessage:null,loadProgress:0,currentTime:0,duration:0}),"video"===e.type?this._playVideo(e):this._playImage(e)):l.v.error(`Invalid item at index ${this.currentIndex}.`)}_playVideo(e){const t=this.videoElements.find(e=>e!==this.activeElement)??this.videoElements[0];this.nextElement=t;let i=t.querySelector("source");i||(i=document.createElement("source"),t.appendChild(i)),i.src!==e.url&&(i.src=e.url,i.type="video/mp4",t.load());const s=e.minTime??this.config.minPlayTime;this.minRuns=e.minRuns??this.config.minRuns??1,this._setupTransitionTimer(s,"video");const r=()=>{this._crossfadeTo(t),t.play().catch(e=>{l.v.error(`Video play failed: ${e.message}`),this._handleMediaError(t,e)})};t.readyState>=4?r():(t.addEventListener("canplaythrough",r,{once:!0}),t.preload="auto",t.load())}_playImage(e){const t=this.imageElements.find(e=>e!==this.activeElement)??this.imageElements[0];this.nextElement=t,t.src=e.url;const i=e.duration??this.config.imageDuration;this.currentImageDuration=i,this.minRuns=1,this.lastStartTime=Date.now(),this._setupTransitionTimer(i,"images");const s=()=>this._crossfadeTo(t);t.complete&&t.naturalWidth>0?s():t.addEventListener("load",s,{once:!0})}_setupTransitionTimer(e,t){clearTimeout(this.transitionTimer),this.transitionTimer=null,this.currentPlaylist.length<=1||(this.transitionTimer=setTimeout(()=>{this.canTransition=!0,l.v.debug(`Min time reached (${e}ms).`),("images"===t||this.runCount>=this.minRuns)&&this._transition()},e))}_crossfadeTo(e){const t=this.activeElement;e.classList.remove("inactive"),e.classList.add("active"),t&&t!==e&&(t.classList.remove("active"),t.classList.add("inactive"),setTimeout(()=>{"VIDEO"===t.tagName&&(t.pause(),t.currentTime=0)},this.config.fadeDuration)),this.activeElement=e,this.nextElement=null}_transition(){this._loadPlaylist(),"VIDEO"===this.activeElement?.tagName&&(this.activeElement.preload="metadata");const e=this.currentIndex,t=this.currentPlaylist.length;if(t>1){let e;do{e=n.e.randomIntFromInterval(0,t-1)}while(e===this.currentIndex);this.currentIndex=e}else this.currentIndex=0;this.config.onTransition?.(e,this.currentIndex,this.runCount,this.currentPlaylist[e]),this._playNext()}_forceNext(){clearTimeout(this.transitionTimer),this.transitionTimer=null,this.canTransition=!0,this.runCount=this.minRuns,this._transition()}handleMediaEnd(e){e===this.activeElement&&(this.runCount++,l.v.debug(`Run ${this.runCount}/${this.minRuns} complete.`),this.canTransition&&this.runCount>=this.minRuns?this._transition():(e.currentTime=0,e.play().catch(e=>l.v.error(`Video loop failed: ${e.message}`))))}_handleMediaError(e,t){const i="VIDEO"===e.tagName?e.querySelector("source")?.src:e.src;l.v.error(`Media failed to load: ${i}`),this.config.onError?.(i,t),setTimeout(()=>this._transition(),1e3)}pause(){if(!this.mediaState.isPaused){if("VIDEO"===this.activeElement?.tagName)this.activeElement.pause();else if("IMG"===this.activeElement?.tagName){const e=Date.now()-this.lastStartTime;this.imageRemainingTime=Math.max(0,this.currentImageDuration-e),clearTimeout(this.transitionTimer),this.transitionTimer=null,l.v.debug(`Image paused. Remaining: ${this.imageRemainingTime}ms.`)}this._setState({isPaused:!0,isPlaying:!1})}}resume(){this.mediaState.isPaused&&("VIDEO"===this.activeElement?.tagName?this.activeElement.play().catch(e=>l.v.error(`Resume failed: ${e.message}`)):"IMG"===this.activeElement?.tagName&&this.imageRemainingTime>0&&(this.currentImageDuration=this.imageRemainingTime,this.lastStartTime=Date.now(),this._setupTransitionTimer(this.imageRemainingTime,"images")),this._setState({isPaused:!1,isPlaying:!0}))}selectItem(e){e<0||e>=this.currentPlaylist.length?l.v.error(`Invalid index: ${e}`):(clearTimeout(this.transitionTimer),this.currentIndex=e,this._playNext())}getMediaInfo(){const e=this.currentPlaylist[this.currentIndex],t=this.activeElement,i={condition:this.currentCondition,mode:this.dayNightMode,playlistLength:this.currentPlaylist.length,currentIndex:this.currentIndex,currentItem:e,runCount:this.runCount,minRuns:this.minRuns,canTransition:this.canTransition,elapsedTime:this.startTime?Date.now()-this.startTime:0,activeType:t?.tagName.toLowerCase()??null,activeIndex:t?.dataset.index??null,mediaState:{...this.mediaState}};return"VIDEO"===t?.tagName&&(i.video={currentTime:t.currentTime,duration:t.duration,paused:t.paused,ended:t.ended,readyState:t.readyState,networkState:t.networkState,buffered:this._getBufferedRanges(t),muted:t.muted,volume:t.volume,videoWidth:t.videoWidth,videoHeight:t.videoHeight}),"IMG"===t?.tagName&&(i.image={src:t.src,complete:t.complete,naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight}),i}destroy(){clearTimeout(this.transitionTimer),[...this.videoElements,...this.imageElements].forEach(e=>{"VIDEO"===e.tagName&&(e.pause(),e.src="",e.load()),e.remove()}),this.videoElements=[],this.imageElements=[],this.activeElement=null,l.v.debug("MediaManager destroyed.")}_setState(e){Object.assign(this.mediaState,e),"VIDEO"===this.activeElement?.tagName&&(this.mediaState.readyState=this.activeElement.readyState,this.mediaState.networkState=this.activeElement.networkState),this.config.onMediaStateChanged?.("update",{...this.mediaState})}_getBufferedRanges(e){const t=[];for(let i=0;i<e.buffered.length;i++)t.push({start:e.buffered.start(i),end:e.buffered.end(i)});return t}}},982(e,t,i){i.a(e,async(e,s)=>{try{i.d(t,{P:()=>v});var r=i(955),a=i(400),n=i(59),o=i(723),d=i(31),l=i(605),c=i(531),h=i(713),m=i(475),g=i(359),u=i(333);const e=[o,c,l,d,h,n],p=await(0,m.T)(e),f=p.weatherIcons,y=p.alertIcons;class v extends((0,a.G)()){#c=r.T.get("iconsPath");constructor(e,t){super(),this.weatherIcons=f,this.alertIcons=y,this.defaultWeatherIcons={iconSet:"openweathermap",type:"static",path:`${this.#c}/weather/owm/`},this.defaultWeatherAlertsIcons={iconSet:"nrkno",type:"static",path:`${this.#c}/alerts/`},this.hass=e||null,this.isNight=t,this.weatherConfig={...this.defaultWeatherIcons,...r.T.get("weatherConfig.icons")},this.weatherConfigAlerts={...this.defaultWeatherAlertsIcons,...r.T.get("weatherConfig.iconsAlerts")},this.iconsSetObj=this.iconsSetWeather,this.iconsSetAlertsObj=this.iconsSetAlerts}static initIconManager(e,t){return new v(e,t)}get iconsSetWeather(){const e=this.weatherConfig.iconSet;let t=Object.keys(this.weatherIcons).find(t=>this.weatherIcons[t].options.alias===e);return t||(t=this.defaultWeatherIcons.iconSet,g.v.warn(`Weather icons set with alias ${e} is not registered. Using default (${t})`)),this.weatherIcons[t]}get iconsSetAlerts(){const e=this.weatherConfigAlerts.iconSet;let t=Object.keys(this.alertIcons).find(t=>this.alertIcons[t].options.alias===e);return t||(t=this.defaultWeatherAlertsIcons.iconSet,g.v.warn(`Weather alerts icons set with alias ${e} is not registered. Using default (${t})`)),this.alertIcons[t]}_getWeatherIcons(e){let t=[];return e.forEach(e=>{const i=u.D.tokenize(e.description),s=this.iconsSetObj[i],r=this.iconsSetObj.options.type.includes(this.weatherConfig.type)?this.weatherConfig.type:"static",a=this.iconsSetObj.options.path,n=this.isNight?"night":"day";if(s){const e=s[n];t.push(`${this.#c}${a}${r}/${e}`)}else g.v.warn(`Weather icon for ${i} is not registered. Using default icon.`),t.push(`${this.#c}weather/not-available.svg`)}),t}_getWeatherAlertIcon(e,t){const i=this.iconsSetAlertsObj,s=i.options.type.includes(this.weatherConfigAlerts.type)?this.weatherConfigAlerts.type:"static",r=i.options.path;let a="";switch(e){case 2:a="yellow";break;case 3:a="orange";break;case 4:a="red";break;default:a="default"}a||g.v.warn(`Weather alert icon for level ${e} is not registered. Using default icon.`);let n=i[a],o="";switch(t){case 1:o="wind";break;case 2:o="snow";break;case 3:case 4:case 5:break;case 6:o="ice"}let d=n[o];return`${this.#c}${r}${s}/${d}`}}s()}catch(e){s(e)}},1)}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return a[e](i,i.exports,o),i.exports}e="function"==typeof Symbol,t=e?Symbol("webpack queues"):"__webpack_queues__",i=e?Symbol("webpack exports"):"__webpack_exports__",s=e?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},o.a=(e,a,n)=>{var o;n&&((o=[]).d=-1);var d,l,c,h=new Set,m=e.exports,g=new Promise((e,t)=>{c=t,l=e});g[i]=m,g[t]=e=>(o&&e(o),h.forEach(e),g.catch(e=>{})),e.exports=g,a(e=>{var a;d=(e=>e.map(e=>{if(null!==e&&"object"==typeof e){if(e[t])return e;if(e.then){var a=[];a.d=0,e.then(e=>{n[i]=e,r(a)},e=>{n[s]=e,r(a)});var n={};return n[t]=e=>e(a),n}}var o={};return o[t]=e=>{},o[i]=e,o}))(e);var n=()=>d.map(e=>{if(e[s])throw e[s];return e[i]}),l=new Promise(e=>{(a=()=>e(n)).r=0;var i=e=>e!==o&&!h.has(e)&&(h.add(e),e&&!e.d&&(a.r++,e.push(a)));d.map(e=>e[t](i))});return a.r?l:n()},e=>(e?c(g[s]=e):l(m),r(o))),o&&o.d<0&&(o.d=0)},o.d=(e,t)=>{for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.p="/",o(400),o(955);o(597);